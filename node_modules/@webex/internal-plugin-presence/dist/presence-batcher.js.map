{"version":3,"names":["_webexCore","require","PresenceBatcher","Batcher","extend","namespace","handleHttpSuccess","res","_this","_promise","default","all","body","statusList","map","presenceResponse","handleItemSuccess","subject","handleItemFailure","item","response","getDeferredForResponse","then","defer","reject","resolve","fingerprintRequest","id","fingerprintResponse","prepareRequest","ids","submitHttpRequest","subjects","webex","request","method","api","resource","_default","exports"],"sources":["presence-batcher.js"],"sourcesContent":["/*!\n * Copyright (c) 2015-2020 Cisco Systems, Inc. See LICENSE file.\n */\n\nimport {Batcher} from '@webex/webex-core';\n\n/**\n * @class\n * @ignore\n */\nconst PresenceBatcher = Batcher.extend({\n  namespace: 'Presence',\n\n  /**\n   * @instance\n   * @memberof PresenceBatcher\n   * @param {HttpResponseObject} res\n   * @returns {Promise}\n   */\n  handleHttpSuccess(res) {\n    return Promise.all(\n      res.body.statusList.map((presenceResponse) =>\n        this.handleItemSuccess(presenceResponse.subject, presenceResponse)\n      )\n    );\n  },\n\n  /**\n   * @instance\n   * @memberof PresenceBatcher\n   * @param {string} item\n   * @param {Object} response\n   * @returns {Promise}\n   */\n  handleItemFailure(item, response) {\n    return this.getDeferredForResponse(item).then((defer) => {\n      defer.reject(response);\n    });\n  },\n\n  /**\n   * @instance\n   * @memberof PresenceBatcher\n   * @param {string} item\n   * @param {Object} response\n   * @returns {Promise}\n   */\n  handleItemSuccess(item, response) {\n    return this.getDeferredForResponse(item).then((defer) => {\n      defer.resolve(response);\n    });\n  },\n\n  /**\n   * @instance\n   * @memberof PresenceBatcher\n   * @param {string} id\n   * @returns {Promise<string>}\n   */\n  fingerprintRequest(id) {\n    return Promise.resolve(id);\n  },\n\n  /**\n   * @instance\n   * @memberof PresenceBatcher\n   * @param {string} id\n   * @returns {Promise<string>}\n   */\n  fingerprintResponse(id) {\n    return Promise.resolve(id);\n  },\n\n  /**\n   * @instance\n   * @memberof PresenceBatcher\n   * @param {Array} ids\n   * @returns {Promise<Array>}\n   */\n  prepareRequest(ids) {\n    return Promise.resolve(ids);\n  },\n\n  /**\n   * @instance\n   * @memberof PresenceBatcher\n   * @param {Object} subjects\n   * @returns {Promise<HttpResponseObject>}\n   */\n  submitHttpRequest(subjects) {\n    return this.webex.request({\n      method: 'POST',\n      api: 'apheleia',\n      resource: 'compositions',\n      body: {subjects},\n    });\n  },\n});\n\nexport default PresenceBatcher;\n"],"mappings":";;;;;;;;;AAIA,IAAAA,UAAA,GAAAC,OAAA;AAJA;AACA;AACA;;AAIA;AACA;AACA;AACA;AACA,IAAMC,eAAe,GAAGC,kBAAO,CAACC,MAAM,CAAC;EACrCC,SAAS,EAAE,UAAU;EAErB;AACF;AACA;AACA;AACA;AACA;EACEC,iBAAiB,WAAAA,kBAACC,GAAG,EAAE;IAAA,IAAAC,KAAA;IACrB,OAAOC,QAAA,CAAAC,OAAA,CAAQC,GAAG,CAChBJ,GAAG,CAACK,IAAI,CAACC,UAAU,CAACC,GAAG,CAAC,UAACC,gBAAgB;MAAA,OACvCP,KAAI,CAACQ,iBAAiB,CAACD,gBAAgB,CAACE,OAAO,EAAEF,gBAAgB,CAAC;IAAA,EACnE,CACF;EACH,CAAC;EAED;AACF;AACA;AACA;AACA;AACA;AACA;EACEG,iBAAiB,WAAAA,kBAACC,IAAI,EAAEC,QAAQ,EAAE;IAChC,OAAO,IAAI,CAACC,sBAAsB,CAACF,IAAI,CAAC,CAACG,IAAI,CAAC,UAACC,KAAK,EAAK;MACvDA,KAAK,CAACC,MAAM,CAACJ,QAAQ,CAAC;IACxB,CAAC,CAAC;EACJ,CAAC;EAED;AACF;AACA;AACA;AACA;AACA;AACA;EACEJ,iBAAiB,WAAAA,kBAACG,IAAI,EAAEC,QAAQ,EAAE;IAChC,OAAO,IAAI,CAACC,sBAAsB,CAACF,IAAI,CAAC,CAACG,IAAI,CAAC,UAACC,KAAK,EAAK;MACvDA,KAAK,CAACE,OAAO,CAACL,QAAQ,CAAC;IACzB,CAAC,CAAC;EACJ,CAAC;EAED;AACF;AACA;AACA;AACA;AACA;EACEM,kBAAkB,WAAAA,mBAACC,EAAE,EAAE;IACrB,OAAOlB,QAAA,CAAAC,OAAA,CAAQe,OAAO,CAACE,EAAE,CAAC;EAC5B,CAAC;EAED;AACF;AACA;AACA;AACA;AACA;EACEC,mBAAmB,WAAAA,oBAACD,EAAE,EAAE;IACtB,OAAOlB,QAAA,CAAAC,OAAA,CAAQe,OAAO,CAACE,EAAE,CAAC;EAC5B,CAAC;EAED;AACF;AACA;AACA;AACA;AACA;EACEE,cAAc,WAAAA,eAACC,GAAG,EAAE;IAClB,OAAOrB,QAAA,CAAAC,OAAA,CAAQe,OAAO,CAACK,GAAG,CAAC;EAC7B,CAAC;EAED;AACF;AACA;AACA;AACA;AACA;EACEC,iBAAiB,WAAAA,kBAACC,QAAQ,EAAE;IAC1B,OAAO,IAAI,CAACC,KAAK,CAACC,OAAO,CAAC;MACxBC,MAAM,EAAE,MAAM;MACdC,GAAG,EAAE,UAAU;MACfC,QAAQ,EAAE,cAAc;MACxBzB,IAAI,EAAE;QAACoB,QAAQ,EAARA;MAAQ;IACjB,CAAC,CAAC;EACJ;AACF,CAAC,CAAC;AAAC,IAAAM,QAAA,GAEYpC,eAAe;AAAAqC,OAAA,CAAA7B,OAAA,GAAA4B,QAAA"}