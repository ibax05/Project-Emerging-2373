{"version":3,"names":["_webexCore","require","PersonUUIDRequestBatcher","Batcher","extend","namespace","handleHttpSuccess","res","_this","promises","body","items","map","personResponse","handleItemSuccess","id","notFoundIds","concat","handleItemFailure","_promise","default","all","getDeferredForResponse","then","defer","reject","email","response","resolve","fingerprintRequest","uuidOrHydraId","hydraId","webex","people","inferPersonIdFromUuid","fingerprintResponse","prepareRequest","ids","join","submitHttpRequest","request","service","resource","config","showAllTypes","_default","exports"],"sources":["people-batcher.js"],"sourcesContent":["/*!\n * Copyright (c) 2015-2020 Cisco Systems, Inc. See LICENSE file.\n */\n\nimport {Batcher} from '@webex/webex-core';\n\n/**\n * @class\n * @ignore\n */\nconst PersonUUIDRequestBatcher = Batcher.extend({\n  namespace: 'People',\n\n  /**\n   * @instance\n   * @memberof PersonUUIDRequestBatcher\n   * @param {HttpResponseObject} res\n   * @returns {Promise}\n   */\n  handleHttpSuccess(res) {\n    const promises = res.body.items.map((personResponse) =>\n      this.handleItemSuccess(personResponse.id, personResponse)\n    );\n\n    if (res.body.notFoundIds) {\n      promises.concat(res.body.notFoundIds.map((id) => this.handleItemFailure(id)));\n    }\n\n    return Promise.all(promises);\n  },\n\n  handleItemFailure(id) {\n    return this.getDeferredForResponse(id).then((defer) => {\n      defer.reject(id);\n    });\n  },\n\n  /**\n   * @instance\n   * @memberof PersonUUIDRequestBatcher\n   * @param {string} email\n   * @param {Object} response\n   * @returns {Promise}\n   */\n  handleItemSuccess(email, response) {\n    return this.getDeferredForResponse(email).then((defer) => {\n      defer.resolve(response);\n    });\n  },\n\n  /**\n   * @instance\n   * @memberof PersonUUIDRequestBatcher\n   * @param {string} uuidOrHydraId\n   * @returns {Promise<string>}\n   */\n  fingerprintRequest(uuidOrHydraId) {\n    const hydraId = this.webex.people.inferPersonIdFromUuid(uuidOrHydraId);\n\n    return Promise.resolve(hydraId);\n  },\n\n  /**\n   * @instance\n   * @memberof PersonUUIDRequestBatcher\n   * @param {string} hydraId\n   * @returns {Promise<string>}\n   */\n  fingerprintResponse(hydraId) {\n    return Promise.resolve(hydraId);\n  },\n\n  prepareRequest(ids) {\n    return Promise.resolve(ids.join());\n  },\n\n  /**\n   * @instance\n   * @memberof PersonUUIDRequestBatcher\n   * @param {Object} ids\n   * @returns {Promise<HttpResponseObject>}\n   */\n  submitHttpRequest(ids) {\n    return this.webex.request({\n      service: 'hydra',\n      resource: `people/?id=${ids}&showAllTypes=${this.config.showAllTypes}`,\n    });\n  },\n});\n\nexport default PersonUUIDRequestBatcher;\n"],"mappings":";;;;;;;;;AAIA,IAAAA,UAAA,GAAAC,OAAA;AAJA;AACA;AACA;;AAIA;AACA;AACA;AACA;AACA,IAAMC,wBAAwB,GAAGC,kBAAO,CAACC,MAAM,CAAC;EAC9CC,SAAS,EAAE,QAAQ;EAEnB;AACF;AACA;AACA;AACA;AACA;EACEC,iBAAiB,WAAAA,kBAACC,GAAG,EAAE;IAAA,IAAAC,KAAA;IACrB,IAAMC,QAAQ,GAAGF,GAAG,CAACG,IAAI,CAACC,KAAK,CAACC,GAAG,CAAC,UAACC,cAAc;MAAA,OACjDL,KAAI,CAACM,iBAAiB,CAACD,cAAc,CAACE,EAAE,EAAEF,cAAc,CAAC;IAAA,EAC1D;IAED,IAAIN,GAAG,CAACG,IAAI,CAACM,WAAW,EAAE;MACxBP,QAAQ,CAACQ,MAAM,CAACV,GAAG,CAACG,IAAI,CAACM,WAAW,CAACJ,GAAG,CAAC,UAACG,EAAE;QAAA,OAAKP,KAAI,CAACU,iBAAiB,CAACH,EAAE,CAAC;MAAA,EAAC,CAAC;IAC/E;IAEA,OAAOI,QAAA,CAAAC,OAAA,CAAQC,GAAG,CAACZ,QAAQ,CAAC;EAC9B,CAAC;EAEDS,iBAAiB,WAAAA,kBAACH,EAAE,EAAE;IACpB,OAAO,IAAI,CAACO,sBAAsB,CAACP,EAAE,CAAC,CAACQ,IAAI,CAAC,UAACC,KAAK,EAAK;MACrDA,KAAK,CAACC,MAAM,CAACV,EAAE,CAAC;IAClB,CAAC,CAAC;EACJ,CAAC;EAED;AACF;AACA;AACA;AACA;AACA;AACA;EACED,iBAAiB,WAAAA,kBAACY,KAAK,EAAEC,QAAQ,EAAE;IACjC,OAAO,IAAI,CAACL,sBAAsB,CAACI,KAAK,CAAC,CAACH,IAAI,CAAC,UAACC,KAAK,EAAK;MACxDA,KAAK,CAACI,OAAO,CAACD,QAAQ,CAAC;IACzB,CAAC,CAAC;EACJ,CAAC;EAED;AACF;AACA;AACA;AACA;AACA;EACEE,kBAAkB,WAAAA,mBAACC,aAAa,EAAE;IAChC,IAAMC,OAAO,GAAG,IAAI,CAACC,KAAK,CAACC,MAAM,CAACC,qBAAqB,CAACJ,aAAa,CAAC;IAEtE,OAAOX,QAAA,CAAAC,OAAA,CAAQQ,OAAO,CAACG,OAAO,CAAC;EACjC,CAAC;EAED;AACF;AACA;AACA;AACA;AACA;EACEI,mBAAmB,WAAAA,oBAACJ,OAAO,EAAE;IAC3B,OAAOZ,QAAA,CAAAC,OAAA,CAAQQ,OAAO,CAACG,OAAO,CAAC;EACjC,CAAC;EAEDK,cAAc,WAAAA,eAACC,GAAG,EAAE;IAClB,OAAOlB,QAAA,CAAAC,OAAA,CAAQQ,OAAO,CAACS,GAAG,CAACC,IAAI,EAAE,CAAC;EACpC,CAAC;EAED;AACF;AACA;AACA;AACA;AACA;EACEC,iBAAiB,WAAAA,kBAACF,GAAG,EAAE;IACrB,OAAO,IAAI,CAACL,KAAK,CAACQ,OAAO,CAAC;MACxBC,OAAO,EAAE,OAAO;MAChBC,QAAQ,gBAAAzB,MAAA,CAAgBoB,GAAG,oBAAApB,MAAA,CAAiB,IAAI,CAAC0B,MAAM,CAACC,YAAY;IACtE,CAAC,CAAC;EACJ;AACF,CAAC,CAAC;AAAC,IAAAC,QAAA,GAEY3C,wBAAwB;AAAA4C,OAAA,CAAA1B,OAAA,GAAAyB,QAAA"}