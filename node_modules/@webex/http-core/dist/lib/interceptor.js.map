{"version":3,"names":["Interceptor","attrs","_this","_classCallCheck2","default","_keys","forEach","key","value","_defineProperty","enumerable","_createClass2","logOptions","options","arguments","length","undefined","logger","_get2","console","process","env","ENABLE_VERBOSE_NETWORK_LOGGING","info","concat","constructor","name","_stringify","onRequest","_promise","resolve","onRequestError","reason","reject","onResponse","response","onResponseError","create","Error","exports"],"sources":["interceptor.js"],"sourcesContent":["/*!\n * Copyright (c) 2015-2020 Cisco Systems, Inc. See LICENSE file.\n */\n\nimport {get} from 'lodash';\n\n/**\n * @class\n */\nexport default class Interceptor {\n  /**\n   * @constructor\n   * @param {Object} attrs\n   * @returns {UrlInterceptor}\n   */\n  constructor(attrs) {\n    if (attrs) {\n      Object.keys(attrs).forEach((key) => {\n        const value = attrs[key];\n\n        Reflect.defineProperty(this, key, {\n          enumerable: true,\n          value,\n        });\n      });\n    }\n  }\n\n  /**\n   * Logs the options of a request. This should be utilized\n   * during the intercepting process, but can be used at any\n   * time otherwise.\n   * @param {object} options\n   * @returns {void}\n   */\n  logOptions(options = {}) {\n    const logger = get(this, 'webex.logger', console);\n\n    if (!process.env.ENABLE_VERBOSE_NETWORK_LOGGING || !logger) {\n      return;\n    }\n\n    // prepend a header for the interceptor\n    logger.info('/***** Interceptor ****************************************************\\\\');\n\n    logger.info(`${this.constructor.name} - ${JSON.stringify(options, null, 2)}`);\n  }\n\n  /**\n   * @abstract\n   * @returns {Interceptor}\n   */\n  static create() {\n    throw new Error('`Interceptor.create()` must be defined');\n  }\n\n  /**\n   * Transform request options before sending them\n   * @param {Object} options\n   * @returns {Promise<Object>}\n   */\n  onRequest(options) {\n    return Promise.resolve(options);\n  }\n\n  /**\n   * Handle request failures\n   * @param {Object} options\n   * @param {Error} reason\n   * @returns {RejectedPromise<Error>}\n   */\n  onRequestError(options, reason) {\n    return Promise.reject(reason);\n  }\n\n  /**\n   * Transform response before returning it\n   * @param {Object} options\n   * @param {HttpResponse} response\n   * @returns {Promise<HttpResponse>}\n   */\n  onResponse(options, response) {\n    return Promise.resolve(response);\n  }\n\n  /**\n   * Handle response errors\n   * @param {Object} options\n   * @param {WebexHttpError} reason\n   * @returns {Promise<WebexHttpError>}\n   */\n  onResponseError(options, reason) {\n    return Promise.reject(reason);\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;AAMA;AACA;AACA;AAFA,IAGqBA,WAAW;EAC9B;AACF;AACA;AACA;AACA;EACE,SAAAA,YAAYC,KAAK,EAAE;IAAA,IAAAC,KAAA;IAAA,IAAAC,gBAAA,CAAAC,OAAA,QAAAJ,WAAA;IACjB,IAAIC,KAAK,EAAE;MACT,IAAAI,KAAA,CAAAD,OAAA,EAAYH,KAAK,CAAC,CAACK,OAAO,CAAC,UAACC,GAAG,EAAK;QAClC,IAAMC,KAAK,GAAGP,KAAK,CAACM,GAAG,CAAC;QAExB,IAAAE,eAAA,CAAAL,OAAA,EAAuBF,KAAI,EAAEK,GAAG,EAAE;UAChCG,UAAU,EAAE,IAAI;UAChBF,KAAK,EAALA;QACF,CAAC,CAAC;MACJ,CAAC,CAAC;IACJ;EACF;;EAEA;AACF;AACA;AACA;AACA;AACA;AACA;EANE,IAAAG,aAAA,CAAAP,OAAA,EAAAJ,WAAA;IAAAO,GAAA;IAAAC,KAAA,EAOA,SAAAI,WAAA,EAAyB;MAAA,IAAdC,OAAO,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,CAAC,CAAC;MACrB,IAAMG,MAAM,GAAG,IAAAC,KAAA,CAAAd,OAAA,EAAI,IAAI,EAAE,cAAc,EAAEe,OAAO,CAAC;MAEjD,IAAI,CAACC,OAAO,CAACC,GAAG,CAACC,8BAA8B,IAAI,CAACL,MAAM,EAAE;QAC1D;MACF;;MAEA;MACAA,MAAM,CAACM,IAAI,CAAC,2EAA2E,CAAC;MAExFN,MAAM,CAACM,IAAI,IAAAC,MAAA,CAAI,IAAI,CAACC,WAAW,CAACC,IAAI,SAAAF,MAAA,CAAM,IAAAG,UAAA,CAAAvB,OAAA,EAAeS,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC,EAAG;IAC/E;;IAEA;AACF;AACA;AACA;EAHE;IAAAN,GAAA;IAAAC,KAAA;IAQA;AACF;AACA;AACA;AACA;IACE,SAAAoB,UAAUf,OAAO,EAAE;MACjB,OAAOgB,QAAA,CAAAzB,OAAA,CAAQ0B,OAAO,CAACjB,OAAO,CAAC;IACjC;;IAEA;AACF;AACA;AACA;AACA;AACA;EALE;IAAAN,GAAA;IAAAC,KAAA,EAMA,SAAAuB,eAAelB,OAAO,EAAEmB,MAAM,EAAE;MAC9B,OAAOH,QAAA,CAAAzB,OAAA,CAAQ6B,MAAM,CAACD,MAAM,CAAC;IAC/B;;IAEA;AACF;AACA;AACA;AACA;AACA;EALE;IAAAzB,GAAA;IAAAC,KAAA,EAMA,SAAA0B,WAAWrB,OAAO,EAAEsB,QAAQ,EAAE;MAC5B,OAAON,QAAA,CAAAzB,OAAA,CAAQ0B,OAAO,CAACK,QAAQ,CAAC;IAClC;;IAEA;AACF;AACA;AACA;AACA;AACA;EALE;IAAA5B,GAAA;IAAAC,KAAA,EAMA,SAAA4B,gBAAgBvB,OAAO,EAAEmB,MAAM,EAAE;MAC/B,OAAOH,QAAA,CAAAzB,OAAA,CAAQ6B,MAAM,CAACD,MAAM,CAAC;IAC/B;EAAC;IAAAzB,GAAA;IAAAC,KAAA,EAzCD,SAAA6B,OAAA,EAAgB;MACd,MAAM,IAAIC,KAAK,CAAC,wCAAwC,CAAC;IAC3D;EAAC;EAAA,OAAAtC,WAAA;AAAA;AAAAuC,OAAA,CAAAnC,OAAA,GAAAJ,WAAA"}