{"version":3,"names":["_window","_interopRequireDefault","require","_browserDetection","_loggerProxy","_BrowserDetection","BrowserDetection","isBrowser","MediaUtil","createPeerConnection","turnServerInfo","config","iceServers","push","urls","url","username","credential","password","bundlePolicy","window","RTCPeerConnection","createMediaStream","tracks","LoggerProxy","logger","error","filtredTracks","filter","element","MediaStream","_default","exports","default"],"sources":["util.ts"],"sourcesContent":["/* globals MediaStream */\nimport window from 'global/window';\n\nimport BrowserDetection from '../common/browser-detection';\nimport LoggerProxy from '../common/logs/logger-proxy';\n\nconst {isBrowser} = BrowserDetection();\n\nconst MediaUtil: any = {};\n\nMediaUtil.createPeerConnection = (turnServerInfo) => {\n  const config: any = {iceServers: []};\n\n  if (turnServerInfo) {\n    config.iceServers.push({\n      urls: turnServerInfo.url,\n      username: turnServerInfo.username || '',\n      credential: turnServerInfo.password || '',\n    });\n  }\n  if (isBrowser('firefox')) {\n    config.bundlePolicy = 'max-compat';\n  }\n\n  return new window.RTCPeerConnection(config);\n};\n\nMediaUtil.createMediaStream = (tracks) => {\n  if (!tracks) {\n    LoggerProxy.logger.error(\"Media:util#createMediaStream --> Tracks don't exist\");\n  }\n  const filtredTracks = tracks.filter((element) => !!element);\n\n  return new MediaStream(filtredTracks);\n};\n\nexport default MediaUtil;\n"],"mappings":";;;;;;;;AACA,IAAAA,OAAA,GAAAC,sBAAA,CAAAC,OAAA;AAEA,IAAAC,iBAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,YAAA,GAAAH,sBAAA,CAAAC,OAAA;AAJA;;AAMA,IAAAG,iBAAA,GAAoB,IAAAC,yBAAgB,GAAE;EAA/BC,SAAS,GAAAF,iBAAA,CAATE,SAAS;AAEhB,IAAMC,SAAc,GAAG,CAAC,CAAC;AAEzBA,SAAS,CAACC,oBAAoB,GAAG,UAACC,cAAc,EAAK;EACnD,IAAMC,MAAW,GAAG;IAACC,UAAU,EAAE;EAAE,CAAC;EAEpC,IAAIF,cAAc,EAAE;IAClBC,MAAM,CAACC,UAAU,CAACC,IAAI,CAAC;MACrBC,IAAI,EAAEJ,cAAc,CAACK,GAAG;MACxBC,QAAQ,EAAEN,cAAc,CAACM,QAAQ,IAAI,EAAE;MACvCC,UAAU,EAAEP,cAAc,CAACQ,QAAQ,IAAI;IACzC,CAAC,CAAC;EACJ;EACA,IAAIX,SAAS,CAAC,SAAS,CAAC,EAAE;IACxBI,MAAM,CAACQ,YAAY,GAAG,YAAY;EACpC;EAEA,OAAO,IAAIC,eAAM,CAACC,iBAAiB,CAACV,MAAM,CAAC;AAC7C,CAAC;AAEDH,SAAS,CAACc,iBAAiB,GAAG,UAACC,MAAM,EAAK;EACxC,IAAI,CAACA,MAAM,EAAE;IACXC,oBAAW,CAACC,MAAM,CAACC,KAAK,CAAC,qDAAqD,CAAC;EACjF;EACA,IAAMC,aAAa,GAAGJ,MAAM,CAACK,MAAM,CAAC,UAACC,OAAO;IAAA,OAAK,CAAC,CAACA,OAAO;EAAA,EAAC;EAE3D,OAAO,IAAIC,WAAW,CAACH,aAAa,CAAC;AACvC,CAAC;AAAC,IAAAI,QAAA,GAEavB,SAAS;AAAAwB,OAAA,CAAAC,OAAA,GAAAF,QAAA"}