{"version":3,"names":["_util","_interopRequireDefault","require","_uuid","_window","_ipAnonymize","_internalPluginMetrics","_loggerProxy","_constants","_browserDetection","_config","_BrowserDetection","BrowserDetection","getOSName","getOSVersion","getBrowserName","getBrowserVersion","anonymizeIPAddress","localIp","anonymize","triggerTimers","_ref","event","meeting","data","eventType","CALL_INITIATED","setStartCallInitiateJoinReq","LOCUS_JOIN_REQUEST","setEndCallInitiateJoinReq","setStartJoinReqResp","LOCUS_JOIN_RESPONSE","setEndJoinReqResp","setStartSetupDelay","mediaType","AUDIO","VIDEO","setStartSendingMediaDelay","RECEIVING_MEDIA_START","setEndSetupDelay","SENDING_MEDIA_START","setEndSendingMediaDelay","LOCAL_SDP_GENERATED","setStartLocalSDPGenRemoteSDPRecvDelay","REMOTE_SDP_RECEIVED","setEndLocalSDPGenRemoteSDPRecvDelay","Metrics","_classCallCheck2","default","_defineProperty2","instance","_events","meetingCollection","keys","_values","_createClass2","key","value","initialSetup","webex","postEvent","options","meetingId","_options$data","indexOf","LoggerProxy","logger","error","concat","get","callEvents","MEDIA_QUALITY","sendMediaQualityAnalyzerMetrics","push","sendCallAnalyzerMetrics","info","initPayload","identifiers","_this$webex$meetings$","_this$webex$meetings$2","payload","eventId","uuid","v4","version","origin","name","networkType","userAgent","userAgentToString","clientInfo","clientType","clientVersion","CLIENT_NAME","localNetworkPrefix","meetings","geoHintInfo","clientAddress","osVersion","subClientType","os","getOSNameInternal","browser","browserVersion","originTime","triggered","Date","toISOString","senderCountryCode","countryCode","canProceed","eventData","webClientDomain","window","location","hostname","Object","prototype","hasOwnProperty","call","errors","trigger","pstnAudioType","mediaCapabilities","recoveredBy","joinTimes","isRoapCallEnabled","initMediaPayload","_this$webex$meetings$3","_this$webex$meetings$4","arguments","length","undefined","audioSetupDelay","videoSetupDelay","UNKNOWN","intervals","intervalData","sourceMetadata","applicationSoftwareType","applicationSoftwareVersion","mediaEngineSoftwareType","mediaEngineSoftwareVersion","startTime","parseLocusError","err","showToUser","errorCode","statusCode","body","ERROR_CODE","MEETING_ERRORS","FREE_USER_MAX_PARTICIPANTS_EXCEEDED","PAID_USER_MAX_PARTICIPANTS_EXCEEDED","SERVICE_MAX_PARTICIPANTS_EXCEEDED","INACTIVE","EXCEEDED_MAX_JOINED_PARTICIPANTS","EXCEEDED_SERVICE_MAX_PARTICIPANTS","MEETING_IS_LOCKED","MEETING_IS_TERMINATING","MEETING_REQUIRE_MODERATOR_PIN_INTENT","MEETING_REQUIRE_MODERATOR_PIN","MEETING_REQUIRE_MODERATOR_ROLE","JOIN_RESTRICTED_USER","GET_RESTRICTED_USER","CREATE_MEDIA_RESTRICTED_USER","JOIN_RESTRICTED_USER_NOT_IN_ROOM","MEETING_NOT_FOUND","NOT_WEBEX_SITE","INVALID_JOIN_TIME","PHONE_NUMBER_NOT_A_NUMBER","PHONE_NUMBER_TOO_LONG","INVALID_DIALABLE_KEY","ONE_ON_ONE_TO_SELF_NOT_ALLOWED","REMOVED_PARTICIPANT","MEETING_LINK_NOT_FOUND","PHONE_NUMBER_TOO_SHORT_AFTER_IDD","INVALID_INVITEE_ADDRESS","PMR_ACCOUNT_LOCKED","RESOURCE_GUEST_FORBIDDEN","PMR_ACCOUNT_SUSPENDED","EMPTY_PHONE_NUMBER_OR_COUNTRY_CODE","INVALID_SINCE_OR_SEQUENCE_HASH_IN_REQUEST","CONVERSATION_NOT_FOUND","RECORDING_CONTROL_NOT_SUPPORTED","RECORDING_NOT_STARTED","RECORDING_NOT_ENABLED","generateErrorPayload","LOCUS_RESPONSE","shownToUser","errorPayload","category","errorDescription","fatal","_includes2","notFatalErrorList","OTHER","errorData","httpCode","_this$webex$meetings","_this$webex$meetings$5","userAgentOption","browserInfo","util","format","metrics","clientName","toLowerCase","split","osInfo","process","env","NODE_ENV","sendBehavioralMetric","metricName","metricFields","metricTags","internal","submitClientMetrics","type","config","fields","tags","_default","exports"],"sources":["index.ts"],"sourcesContent":["/*!\n * Copyright (c) 2015-2020 Cisco Systems, Inc. See LICENSE file.\n */\nimport util from 'util';\n\nimport {includes} from 'lodash';\nimport uuid from 'uuid';\n// @ts-ignore\nimport window from 'global/window';\nimport anonymize from 'ip-anonymize';\n\n// @ts-ignore\nimport {getOSNameInternal} from '@webex/internal-plugin-metrics';\nimport LoggerProxy from '../common/logs/logger-proxy';\nimport {MEETING_ERRORS} from '../constants';\nimport BrowserDetection from '../common/browser-detection';\n\nimport {\n  error,\n  eventType,\n  errorCodes as ERROR_CODE,\n  UNKNOWN,\n  CLIENT_NAME,\n  mediaType,\n} from './config';\n\nconst {getOSName, getOSVersion, getBrowserName, getBrowserVersion} = BrowserDetection();\n\n// Apply a CIDR /28 format to the IPV4 and /96 to the IPV6 addresses\n// For reference : https://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing\nconst anonymizeIPAddress = (localIp) => anonymize(localIp, 28, 96);\n\nconst triggerTimers = ({event, meeting, data}) => {\n  switch (event) {\n    case eventType.CALL_INITIATED:\n      meeting.setStartCallInitiateJoinReq();\n      break;\n    case eventType.LOCUS_JOIN_REQUEST:\n      meeting.setEndCallInitiateJoinReq();\n      meeting.setStartJoinReqResp();\n      break;\n    case eventType.LOCUS_JOIN_RESPONSE:\n      meeting.setEndJoinReqResp();\n      meeting.setStartSetupDelay(mediaType.AUDIO);\n      meeting.setStartSetupDelay(mediaType.VIDEO);\n      meeting.setStartSendingMediaDelay(mediaType.AUDIO);\n      meeting.setStartSendingMediaDelay(mediaType.VIDEO);\n      break;\n    case eventType.RECEIVING_MEDIA_START:\n      meeting.setEndSetupDelay(data.mediaType);\n      break;\n    case eventType.SENDING_MEDIA_START:\n      meeting.setEndSendingMediaDelay(data.mediaType);\n      break;\n    case eventType.LOCAL_SDP_GENERATED:\n      meeting.setStartLocalSDPGenRemoteSDPRecvDelay();\n      break;\n    case eventType.REMOTE_SDP_RECEIVED:\n      meeting.setEndLocalSDPGenRemoteSDPRecvDelay();\n      break;\n    default:\n      break;\n  }\n};\n\n/**\n * @description Metrics handles all the call metrics events\n * @export\n * @class Metrics\n */\nclass Metrics {\n  static instance: Metrics;\n\n  _events: any;\n  keys: any;\n  meetingCollection: any;\n  webex: any;\n\n  /**\n   * Create Metrics Object\n   * @constructor\n   * @public\n   * @memberof Meetings\n   */\n  constructor() {\n    if (!Metrics.instance) {\n      /**\n       * @instance\n       * @type {Array}\n       * @private\n       * @memberof Metrics\n       */\n      this._events = [];\n      /**\n       * @instance\n       * @type {MeetingCollection}\n       * @private\n       * @memberof Metrics\n       */\n      this.meetingCollection = null;\n      /**\n       * @instance\n       * @type {MeetingCollection}\n       * @private\n       * @memberof Metrics\n       */\n      this.keys = Object.values(eventType);\n      /**\n       * @instance\n       * @type {Metrics}\n       * @private\n       * @memberof Metrics\n       */\n      Metrics.instance = this;\n    }\n\n    // eslint-disable-next-line no-constructor-return\n    return Metrics.instance;\n  }\n\n  /**\n   * Initializes the Metrics singleton with a meeting Collection.\n   *\n   * @param {Object} meetingCollection meetings object\n   * @param {Object} webex  webex SDK object\n   *\n   * @returns {void}\n   */\n  initialSetup(meetingCollection: object, webex: object) {\n    this.meetingCollection = meetingCollection;\n    this.webex = webex;\n  }\n\n  /**\n   * poste Meeting event metrics\n   * @param {object} options {meetingId/meeting} as a json object\n   * @param {Meeting} options.meeting Meeting object\n   * @param {String} options.meetingId\n   * @param {object} options.data\n   * @param {object} options.event\n   * @returns {object} null\n   */\n  postEvent(options: {meeting?: any; meetingId?: string; data?: object; event?: any} | any) {\n    const {meetingId, data = {}, event} = options;\n    let {meeting} = options;\n\n    if (this.keys.indexOf(event) === -1) {\n      LoggerProxy.logger.error(\n        `Metrics:index#postEvent --> Event ${event} doesn't exist in dictionary`\n      );\n    }\n\n    if (!meeting && meetingId) {\n      meeting = this.meetingCollection.get(meetingId);\n      options.meeting = meeting;\n    }\n\n    if (meeting) {\n      triggerTimers(options);\n\n      if (!meeting.callEvents) {\n        meeting.callEvents = [];\n      }\n      if (event === eventType.MEDIA_QUALITY) {\n        data.event = event;\n        meeting.sendMediaQualityAnalyzerMetrics(data);\n      } else {\n        meeting.callEvents.push(event);\n        data.event = event;\n        meeting.sendCallAnalyzerMetrics(data);\n      }\n    } else {\n      LoggerProxy.logger.info(\n        `Metrics:index#postEvent --> Event received for meetingId:${meetingId}, but meeting not found in collection.`\n      );\n    }\n  }\n\n  /**\n   *  Docs for Call analyzer metrics\n   *   https://sqbu-github.cisco.com/WebExSquared/call-analyzer/wiki\n   *   https://sqbu-github.cisco.com/WebExSquared/event-dictionary/blob/master/diagnostic-events.raml\n   */\n\n  // eslint-disable-next-line @typescript-eslint/no-shadow\n  initPayload(eventType, identifiers, options) {\n    const payload: any = {\n      eventId: uuid.v4(),\n      version: 1,\n      origin: {\n        name: 'endpoint',\n        networkType: 'unknown',\n        userAgent: this.userAgentToString(),\n        clientInfo: {\n          clientType: options.clientType,\n          clientVersion: `${CLIENT_NAME}/${this.webex.version}`,\n          localNetworkPrefix: anonymizeIPAddress(this.webex.meetings.geoHintInfo?.clientAddress),\n          osVersion: getOSVersion() || 'unknown',\n          subClientType: options.subClientType,\n          os: getOSNameInternal(),\n          browser: getBrowserName(),\n          browserVersion: getBrowserVersion(),\n        },\n      },\n      originTime: {\n        triggered: new Date().toISOString(),\n      },\n      senderCountryCode: this.webex.meetings.geoHintInfo?.countryCode,\n      event: {\n        name: eventType,\n        canProceed: true,\n        identifiers,\n        eventData: {webClientDomain: window.location.hostname},\n      },\n    };\n\n    // TODO: more options should be checked and some of them should be mandatory in certain conditions\n    if (options) {\n      if (Object.prototype.hasOwnProperty.call(options, 'canProceed')) {\n        payload.event.canProceed = options.canProceed;\n      }\n      if (options.errors) {\n        payload.event.errors = options.errors;\n      }\n      if (options.mediaType) {\n        payload.event.mediaType = options.mediaType;\n      }\n      if (options.trigger) {\n        payload.event.trigger = options.trigger;\n      }\n      if (options.pstnAudioType) {\n        payload.event.pstnAudioType = options.pstnAudioType;\n      }\n      if (options.mediaCapabilities) {\n        payload.event.mediaCapabilities = options.mediaCapabilities;\n      }\n      if (options.recoveredBy) {\n        payload.event.recoveredBy = options.recoveredBy;\n      }\n      if (options.joinTimes) {\n        payload.event.joinTimes = options.joinTimes;\n      }\n      if (options.isRoapCallEnabled) {\n        payload.event.isRoapCallEnabled = options.isRoapCallEnabled;\n      }\n    }\n\n    return payload;\n  }\n\n  /**\n   * get the payload specific for a media quality event through call analyzer\n   * @param {String} eventType the event name\n   * @param {Object} identifiers contains the identifiers needed for CA\n   * @param {String} identifiers.correlationId\n   * @param {String} identifiers.locusUrl\n   * @param {String} identifiers.locusId\n   * @param {Object} options\n   * @param {Object} options.intervalData\n   * @param {String} options.clientType\n   * @returns {Object}\n   * @public\n   * @memberof Metrics\n   */\n  public initMediaPayload(\n    // eslint-disable-next-line @typescript-eslint/no-shadow\n    eventType: string,\n    identifiers: {\n      correlationId: string;\n      locusUrl: string;\n      locusId: string;\n    },\n    options:\n      | {\n          intervalData: object;\n          clientType: string;\n        }\n      | any = {}\n  ) {\n    const {audioSetupDelay, videoSetupDelay, joinTimes} = options;\n\n    const payload = {\n      eventId: uuid.v4(),\n      version: 1,\n      origin: {\n        audioSetupDelay,\n        videoSetupDelay,\n        name: 'endpoint',\n        networkType: options.networkType || UNKNOWN,\n        userAgent: this.userAgentToString(),\n        clientInfo: {\n          clientType: options.clientType, // TODO: Only clientType: 'TEAMS_CLIENT' is whitelisted\n          clientVersion: `${CLIENT_NAME}/${this.webex.version}`,\n          localNetworkPrefix: anonymizeIPAddress(this.webex.meetings.geoHintInfo?.clientAddress),\n          os: getOSNameInternal(),\n          osVersion: getOSVersion() || UNKNOWN,\n          subClientType: options.subClientType,\n          browser: getBrowserName(),\n          browserVersion: getBrowserVersion(),\n        },\n      },\n      originTime: {\n        triggered: new Date().toISOString(),\n      },\n      senderCountryCode: this.webex.meetings.geoHintInfo?.countryCode,\n      event: {\n        name: eventType,\n        canProceed: true,\n        identifiers,\n        intervals: [options.intervalData],\n        joinTimes,\n        eventData: {\n          webClientDomain: window.location.hostname,\n        },\n        sourceMetadata: {\n          applicationSoftwareType: CLIENT_NAME,\n          applicationSoftwareVersion: this.webex.version,\n          mediaEngineSoftwareType: getBrowserName() || 'browser',\n          mediaEngineSoftwareVersion: getOSVersion() || UNKNOWN,\n          startTime: new Date().toISOString(),\n        },\n      },\n    };\n\n    return payload;\n  }\n\n  /**\n   * This function Parses a Locus error and returns a diagnostic event payload.\n   * It should keep updating from:\n   * https://sqbu-github.cisco.com/WebExSquared/spark-client-framework/blob/master/spark-client-framework/Adapters/TelephonyAdapter/TelephonyAdapter.cpp#L920\n   *\n   * @param {Object} err the error Object from Locus response\n   * @param {boolean} showToUser true if a toast is shown to user\n   * @returns {{showToUser: boolean, category: string, errorDescription: string,\n   *  errorCode: number, errorData: *, fatal: boolean, name: string}}\n   */\n  parseLocusError(err: any, showToUser: boolean) {\n    let errorCode;\n\n    if (err && err.statusCode && err.statusCode >= 500) {\n      errorCode = 1003;\n    } else if (err && err.body && err.body.errorCode) {\n      // locus error codes: https://sqbu-github.cisco.com/WebExSquared/locus/blob/master/server/src/main/resources/locus-error-codes.properties\n      switch (ERROR_CODE[err.body.errorCode]) {\n        case MEETING_ERRORS.FREE_USER_MAX_PARTICIPANTS_EXCEEDED:\n          errorCode = 3007;\n          break;\n        case MEETING_ERRORS.PAID_USER_MAX_PARTICIPANTS_EXCEEDED:\n        case MEETING_ERRORS.SERVICE_MAX_PARTICIPANTS_EXCEEDED:\n          errorCode = 3002;\n          break;\n        case MEETING_ERRORS.INACTIVE:\n          errorCode = 4001;\n          break;\n        case MEETING_ERRORS.EXCEEDED_MAX_JOINED_PARTICIPANTS:\n        case MEETING_ERRORS.EXCEEDED_SERVICE_MAX_PARTICIPANTS:\n          errorCode = 3001;\n          break;\n        case MEETING_ERRORS.MEETING_IS_LOCKED:\n          errorCode = 4002;\n          break;\n        case MEETING_ERRORS.MEETING_IS_TERMINATING:\n          errorCode = 4003;\n          break;\n        case MEETING_ERRORS.MEETING_REQUIRE_MODERATOR_PIN_INTENT:\n          errorCode = 4004;\n          break;\n        case MEETING_ERRORS.MEETING_REQUIRE_MODERATOR_PIN:\n          errorCode = 4005;\n          break;\n        case MEETING_ERRORS.MEETING_REQUIRE_MODERATOR_ROLE:\n          errorCode = 4006;\n          break;\n        case MEETING_ERRORS.JOIN_RESTRICTED_USER:\n        case MEETING_ERRORS.GET_RESTRICTED_USER:\n        case MEETING_ERRORS.CREATE_MEDIA_RESTRICTED_USER:\n          errorCode = 3005;\n          break;\n        case MEETING_ERRORS.JOIN_RESTRICTED_USER_NOT_IN_ROOM:\n          errorCode = 4007;\n          break;\n        case MEETING_ERRORS.MEETING_NOT_FOUND:\n          errorCode = 4011;\n          break;\n        case MEETING_ERRORS.NOT_WEBEX_SITE:\n          errorCode = 4012;\n          break;\n        case MEETING_ERRORS.INVALID_JOIN_TIME:\n          errorCode = 4013;\n          break;\n        case MEETING_ERRORS.PHONE_NUMBER_NOT_A_NUMBER:\n          errorCode = 4016;\n          break;\n        case MEETING_ERRORS.PHONE_NUMBER_TOO_LONG:\n          errorCode = 4017;\n          break;\n        case MEETING_ERRORS.INVALID_DIALABLE_KEY:\n          errorCode = 4018;\n          break;\n        case MEETING_ERRORS.ONE_ON_ONE_TO_SELF_NOT_ALLOWED:\n          errorCode = 4019;\n          break;\n        case MEETING_ERRORS.REMOVED_PARTICIPANT:\n          errorCode = 4020;\n          break;\n        case MEETING_ERRORS.MEETING_LINK_NOT_FOUND:\n          errorCode = 4021;\n          break;\n        case MEETING_ERRORS.PHONE_NUMBER_TOO_SHORT_AFTER_IDD:\n          errorCode = 4022;\n          break;\n        case MEETING_ERRORS.INVALID_INVITEE_ADDRESS:\n          errorCode = 4023;\n          break;\n        case MEETING_ERRORS.PMR_ACCOUNT_LOCKED:\n          errorCode = 4024;\n          break;\n        case MEETING_ERRORS.RESOURCE_GUEST_FORBIDDEN:\n          errorCode = 4025;\n          break;\n        case MEETING_ERRORS.PMR_ACCOUNT_SUSPENDED:\n          errorCode = 4026;\n          break;\n        case MEETING_ERRORS.EMPTY_PHONE_NUMBER_OR_COUNTRY_CODE:\n          errorCode = 4027;\n          break;\n        case MEETING_ERRORS.INVALID_SINCE_OR_SEQUENCE_HASH_IN_REQUEST:\n          errorCode = 1006;\n          break;\n        case MEETING_ERRORS.CONVERSATION_NOT_FOUND:\n          errorCode = 4028;\n          break;\n        case MEETING_ERRORS.RECORDING_CONTROL_NOT_SUPPORTED:\n        case MEETING_ERRORS.RECORDING_NOT_STARTED:\n        case MEETING_ERRORS.RECORDING_NOT_ENABLED:\n          errorCode = 4029;\n          break;\n        default:\n          errorCode = 4008;\n      }\n    } else {\n      errorCode = 4008;\n    }\n\n    return this.generateErrorPayload(errorCode, showToUser, error.name.LOCUS_RESPONSE, err);\n  }\n\n  generateErrorPayload(errorCode, shownToUser, name, err) {\n    if (error.errors[errorCode]) {\n      const errorPayload: any = {\n        shownToUser: shownToUser || false,\n        category: error.errors[errorCode][2],\n        errorDescription: error.errors[errorCode][0],\n        errorCode,\n        fatal: !includes(error.notFatalErrorList, errorCode),\n        name: name || error.name.OTHER,\n      };\n\n      if (err && err.body) {\n        errorPayload.errorData = err.body;\n      }\n\n      if (err && err.statusCode) {\n        errorPayload.httpCode = err.statusCode;\n      }\n\n      return errorPayload;\n    }\n\n    return null;\n  }\n\n  /**\n   * Returns a formated string of the user agent.\n   *\n   * @returns {string} formatted user agent information\n   */\n  userAgentToString() {\n    let userAgentOption;\n    let browserInfo;\n    const clientInfo = util.format('client=%s', `${this.webex.meetings?.metrics?.clientName}`);\n\n    if (\n      ['chrome', 'firefox', 'msie', 'msedge', 'safari'].indexOf(getBrowserName().toLowerCase()) !==\n      -1\n    ) {\n      browserInfo = util.format(\n        'browser=%s',\n        `${getBrowserName().toLowerCase()}/${getBrowserVersion().split('.')[0]}`\n      );\n    }\n    const osInfo = util.format('os=%s', `${getOSName()}/${getOSVersion().split('.')[0]}`);\n\n    if (browserInfo) {\n      userAgentOption = `(${browserInfo}`;\n    }\n    if (osInfo) {\n      userAgentOption = userAgentOption\n        ? `${userAgentOption}; ${clientInfo}; ${osInfo}`\n        : `${clientInfo}; (${osInfo}`;\n    }\n    if (userAgentOption) {\n      userAgentOption += ')';\n\n      return util.format(\n        'webex-js-sdk/%s %s',\n        `${process.env.NODE_ENV}-${this.webex.version}`,\n        userAgentOption\n      );\n    }\n\n    return util.format('webex-js-sdk/%s', `${process.env.NODE_ENV}-${this.webex.version}`);\n  }\n\n  /**\n   * Uploads given metric to the Metrics service as an Behavioral metric.\n   * Metadata about the environment such as browser, OS, SDK and their versions\n   * are automatically added when the metric is sent.\n   *\n   * The Metrics service will send an Behavioral metric to InfluxDB for\n   * aggregation.\n   * See https://confluence-eng-gpk2.cisco.com/conf/display/WBXT/Getting+started+with+Metrics+Service.\n   *\n   * @param {string} metricName  Name of the metric (measurement) to send\n   * @param {Object} metricFields  Key-valye pairs of data or values about this metric\n   * @param {Object} metricTags  Key-value pairs of metric metadata\n   *\n   * @returns {void}\n   */\n  sendBehavioralMetric(metricName: string, metricFields: object = {}, metricTags: object = {}) {\n    this.webex.internal.metrics.submitClientMetrics(metricName, {\n      type: this.webex.config.metrics.type,\n      fields: metricFields,\n      tags: metricTags,\n    });\n  }\n}\n\n// Export Metrics singleton ---------------------------------------------------\nconst instance = new Metrics();\n\nexport default instance;\n"],"mappings":"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"}