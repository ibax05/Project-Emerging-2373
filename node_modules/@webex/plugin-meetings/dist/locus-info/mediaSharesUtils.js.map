{"version":3,"names":["_constants","require","MediaSharesUtils","parse","mediaShares","content","beneficiaryId","getContentBeneficiaryId","disposition","getContentDisposition","whiteboard","getWhiteboardBeneficiaryId","getWhiteboardDisposition","resourceUrl","getWhiteboardResourceUrl","getMediaShares","oldShare","newShare","previous","current","contentFloor","extractContentFloor","whiteboardFloor","extractWhiteboardFloor","extractContent","length","find","share","name","CONTENT","extractWhiteboard","WHITEBOARD","extractFloor","mediaStream","floor","beneficiary","id","_default","exports","default"],"sources":["mediaSharesUtils.ts"],"sourcesContent":["import {CONTENT, WHITEBOARD} from '../constants';\n\nconst MediaSharesUtils: any = {};\n\n/**\n * parses the relevant values for mediaShares: contentId, disposition\n * @param {Object} mediaShares\n * @returns {undefined}\n */\nMediaSharesUtils.parse = (mediaShares: object) => {\n  if (mediaShares) {\n    return {\n      content: {\n        beneficiaryId: MediaSharesUtils.getContentBeneficiaryId(mediaShares),\n        disposition: MediaSharesUtils.getContentDisposition(mediaShares),\n      },\n      whiteboard: {\n        beneficiaryId: MediaSharesUtils.getWhiteboardBeneficiaryId(mediaShares),\n        disposition: MediaSharesUtils.getWhiteboardDisposition(mediaShares),\n        resourceUrl: MediaSharesUtils.getWhiteboardResourceUrl(mediaShares),\n      },\n    };\n  }\n\n  return null;\n};\n\n/**\n * get the previous and current mediaShares values parsed, as well as the boolean updates\n * @param {Object} oldShare\n * @param {Object} newShare\n * @returns {Object}\n * previous: {Object} old share, current: {Object} new share,\n */\nMediaSharesUtils.getMediaShares = (oldShare: object, newShare: object) => {\n  const previous = oldShare && MediaSharesUtils.parse(oldShare);\n  const current = newShare && MediaSharesUtils.parse(newShare);\n\n  return {\n    previous,\n    current,\n  };\n};\n\n/**\n * get the content floor disposition (released, granted)\n * @param {Object} mediaShares\n * @returns {Boolean} disposition\n */\nMediaSharesUtils.getContentDisposition = (mediaShares: object) => {\n  const contentFloor = MediaSharesUtils.extractContentFloor(mediaShares);\n\n  return contentFloor ? contentFloor.disposition : null;\n};\n\n/**\n * get the whiteboard floor disposition (released, granted)\n * @param {Object} mediaShares\n * @returns {Boolean} disposition\n */\nMediaSharesUtils.getWhiteboardDisposition = (mediaShares: object) => {\n  const whiteboardFloor = MediaSharesUtils.extractWhiteboardFloor(mediaShares);\n\n  return whiteboardFloor ? whiteboardFloor.disposition : null;\n};\n\n/**\n * extract the content property from media shares\n * @param {Object} mediaShares\n * @returns {Object}\n */\nMediaSharesUtils.extractContent = (mediaShares: any) => {\n  if (!mediaShares || !mediaShares.length) {\n    return null;\n  }\n\n  return mediaShares.find((share) => share.name === CONTENT) || null;\n};\n\n/**\n * extract the whiteboard property from media shares\n * @param {Object} mediaShares\n * @returns {Object}\n */\nMediaSharesUtils.extractWhiteboard = (mediaShares: any) => {\n  if (!mediaShares || !mediaShares.length) {\n    return null;\n  }\n\n  return mediaShares.find((share) => share.name === WHITEBOARD) || null;\n};\n\n/**\n * extract the media stream floor property from content object\n * @param {Object} mediaStream\n * @returns {Object}\n */\nMediaSharesUtils.extractFloor = (mediaStream: any) => {\n  if (!mediaStream) {\n    return null;\n  }\n\n  return mediaStream.floor;\n};\n\n/**\n * extract the content's floor from media shares\n * @param {Object} mediaShares\n * @returns {Object}\n */\nMediaSharesUtils.extractContentFloor = (mediaShares: object) => {\n  const content = MediaSharesUtils.extractContent(mediaShares);\n\n  return MediaSharesUtils.extractFloor(content);\n};\n\n/**\n * extract the whiteboard's floor from media shares\n * @param {Object} mediaShares\n * @returns {Object}\n */\nMediaSharesUtils.extractWhiteboardFloor = (mediaShares: object) => {\n  const whiteboard = MediaSharesUtils.extractWhiteboard(mediaShares);\n\n  return MediaSharesUtils.extractFloor(whiteboard);\n};\n\n/**\n * get who is sharing from media shares (content)\n * @param {Object} mediaShares\n * @returns {Object}\n */\nMediaSharesUtils.getContentBeneficiaryId = (mediaShares: object) => {\n  const contentFloor = MediaSharesUtils.extractContentFloor(mediaShares);\n\n  if (!contentFloor || !contentFloor.beneficiary) {\n    return null;\n  }\n\n  return contentFloor.beneficiary.id;\n};\n\n/**\n * get who is sharing from media shares (whiteboard)\n * @param {Object} mediaShares\n * @returns {Object}\n */\nMediaSharesUtils.getWhiteboardBeneficiaryId = (mediaShares: object) => {\n  const whiteboardFloor = MediaSharesUtils.extractWhiteboardFloor(mediaShares);\n\n  if (!whiteboardFloor || !whiteboardFloor.beneficiary) {\n    return null;\n  }\n\n  return whiteboardFloor.beneficiary.id;\n};\n\n/**\n * get the which whiteboard is being shared via resource url\n * @param {Object} mediaShares\n * @returns {Object}\n */\nMediaSharesUtils.getWhiteboardResourceUrl = (mediaShares: object) => {\n  const whiteboard = MediaSharesUtils.extractWhiteboard(mediaShares);\n\n  if (!whiteboard || !whiteboard.resourceUrl) {\n    return null;\n  }\n\n  return whiteboard.resourceUrl;\n};\n\nexport default MediaSharesUtils;\n"],"mappings":"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"}