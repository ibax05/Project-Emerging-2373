{"version":3,"names":["_constants","require","ownKeys","object","enumerableOnly","keys","_Object$keys2","_Object$getOwnPropertySymbols","symbols","filter","sym","_Object$getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","Object","forEach","key","_defineProperty2","default","_Object$getOwnPropertyDescriptors","_Object$defineProperties","_Object$defineProperty","InfoUtils","parse","info","roles","isJoined","undefined","parsed","policy","parsePolicy","moderator","parseModerator","coHost","parseCoHost","userDisplayHints","includes","SELF_ROLES","COHOST","MODERATOR","_keys","sipUri","meetingId","meetingNumber","parseDisplayHintSection","displayHintKey","displayHints","DISPLAY_HINTS","LOWER_SOMEONE_ELSES_HAND","isLocked","LOCK_STATUS_LOCKED","isUnlocked","LOCK_STATUS_UNLOCKED","getInfos","oldInfo","newInfo","previous","current","updates","_default","exports"],"sources":["infoUtils.ts"],"sourcesContent":["import {SELF_ROLES, DISPLAY_HINTS} from '../constants';\n\nconst InfoUtils: any = {};\n\nInfoUtils.parse = (info, roles, isJoined = true) => {\n  const parsed: any = {\n    policy: InfoUtils.parsePolicy(info),\n    moderator: InfoUtils.parseModerator(info),\n    coHost: InfoUtils.parseCoHost(info),\n  };\n\n  let userDisplayHints = isJoined ? {...parsed.policy} : {};\n\n  if (roles.includes(SELF_ROLES.COHOST)) {\n    userDisplayHints = {...userDisplayHints, ...parsed.coHost};\n  }\n\n  if (roles.includes(SELF_ROLES.MODERATOR)) {\n    userDisplayHints = {...userDisplayHints, ...parsed.moderator};\n  }\n\n  parsed.userDisplayHints = Object.keys(userDisplayHints);\n\n  if (info.sipUri) {\n    parsed.sipUri = info.sipUri;\n  }\n\n  if (info.meetingId) {\n    parsed.meetingNumber = info.meetingId;\n  }\n\n  return parsed;\n};\n\nInfoUtils.parseDisplayHintSection = (info, displayHintKey) => {\n  const displayHints = {};\n\n  if (\n    info &&\n    info.displayHints &&\n    info.displayHints[displayHintKey] &&\n    info.displayHints[displayHintKey].length > 0\n  ) {\n    info.displayHints[displayHintKey].forEach((key) => {\n      displayHints[key] = true;\n    });\n  }\n\n  return displayHints;\n};\n\nInfoUtils.parsePolicy = (info) => InfoUtils.parseDisplayHintSection(info, 'joined');\n\nInfoUtils.parseModerator = (info) => {\n  const displayHints = InfoUtils.parseDisplayHintSection(info, 'moderator');\n\n  return {...displayHints, [DISPLAY_HINTS.LOWER_SOMEONE_ELSES_HAND]: true};\n};\n\nInfoUtils.parseCoHost = (info) => {\n  const displayHints = InfoUtils.parseDisplayHintSection(info, 'coHost');\n\n  return {...displayHints, [DISPLAY_HINTS.LOWER_SOMEONE_ELSES_HAND]: true};\n};\n\nInfoUtils.isLocked = (policy) => policy.LOCK_STATUS_LOCKED || false;\n\nInfoUtils.isUnlocked = (policy) => policy.LOCK_STATUS_UNLOCKED || false;\n\nInfoUtils.getInfos = (oldInfo, newInfo, roles, isJoined) => {\n  let previous = null;\n\n  if (oldInfo) {\n    previous = oldInfo;\n  }\n  const current = newInfo && InfoUtils.parse(newInfo, roles, isJoined);\n  const updates: any = {};\n\n  if (current) {\n    current.isLocked = InfoUtils.isLocked(current.policy);\n    current.isUnlocked = InfoUtils.isUnlocked(current.policy);\n\n    if ((previous && previous.isUnlocked && current.isLocked) || (!previous && current.isLocked)) {\n      updates.isLocked = current.isLocked;\n    }\n    if (\n      (previous && previous.isLocked && current.isUnlocked) ||\n      (!previous && current.isUnlocked)\n    ) {\n      updates.isUnlocked = current.isUnlocked;\n    }\n  }\n\n  return {\n    previous,\n    current,\n    updates,\n  };\n};\n\nexport default InfoUtils;\n"],"mappings":"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"}