{"version":3,"names":["_uuid","_interopRequireDefault","require","_constants","MembersUtil","generateAddMemberOptions","invitee","locusUrl","alertIfActive","generateAdmitMemberOptions","memberIds","getAddMemberBody","options","invitees","address","emailAddress","email","phoneNumber","getAdmitMemberRequestBody","admit","participantIds","getAdmitMemberRequestParams","format","body","uri","concat","CONTROLS","method","HTTP_VERBS","PUT","getAddMemberRequestParams","requestParams","isInvalidInvitee","DIALER_REGEX","E164_FORMAT","test","VALID_EMAIL_ADDRESS","getRemoveMemberRequestParams","reason","PARTICIPANT","memberId","LEAVE","generateTransferHostMemberOptions","transfer","moderator","generateRemoveMemberOptions","removal","_FORCED_","generateMuteMemberOptions","status","muted","generateRaiseHandMemberOptions","raised","generateLowerAllHandsMemberOptions","requestingParticipantId","getMuteMemberRequestParams","audio","PATCH","getRaiseHandMemberRequestParams","hand","getLowerAllHandsMemberRequestParams","getTransferHostToMemberRequestParams","role","genderateSendDTMFOptions","url","tones","generateSendDTMFRequestParams","_ref","device","dtmf","correlationId","uuid","v4","direction","SEND_DTMF_ENDPOINT","POST","cancelPhoneInviteOptions","generateCancelInviteRequestParams","actionType","_REMOVE_","_default","exports","default"],"sources":["util.ts"],"sourcesContent":["import uuid from 'uuid';\n\nimport {\n  HTTP_VERBS,\n  CONTROLS,\n  _FORCED_,\n  LEAVE,\n  PARTICIPANT,\n  VALID_EMAIL_ADDRESS,\n  DIALER_REGEX,\n  SEND_DTMF_ENDPOINT,\n  _REMOVE_,\n} from '../constants';\n\nconst MembersUtil: any = {};\n\n/**\n * @param {Object} invitee with emailAddress, email or phoneNumber\n * @param {String} locusUrl\n * @param {Boolean} alertIfActive\n * @returns {Object} the format object\n */\nMembersUtil.generateAddMemberOptions = (\n  invitee: object,\n  locusUrl: string,\n  alertIfActive: boolean\n) => ({\n  invitee,\n  locusUrl,\n  alertIfActive,\n});\n\n/**\n * @param {Array} memberIds\n * @param {String} locusUrl\n * @returns {Object} the format object\n */\nMembersUtil.generateAdmitMemberOptions = (memberIds: Array<any>, locusUrl: string) => ({\n  locusUrl,\n  memberIds,\n});\n\n/**\n * @param {Object} options with {invitee: {emailAddress, email, phoneNumber}, alertIfActive}\n * @returns {Object} with {invitees: [{address}], alertIfActive}\n */\nMembersUtil.getAddMemberBody = (options: any) => ({\n  invitees: [\n    {\n      address: options.invitee.emailAddress || options.invitee.email || options.invitee.phoneNumber,\n    },\n  ],\n  alertIfActive: options.alertIfActive,\n});\n\n/**\n * @param {Object} options with {memberIds}\n * @returns {Object} admit with {memberIds}\n */\nMembersUtil.getAdmitMemberRequestBody = (options: any) => ({\n  admit: {participantIds: options.memberIds},\n});\n\n/**\n * @param {Object} format with {memberIds, locusUrl}\n * @returns {Object} the request parameters (method, uri, body) needed to make a admitMember request\n */\nMembersUtil.getAdmitMemberRequestParams = (format: any) => {\n  const body = MembersUtil.getAdmitMemberRequestBody(format);\n  const uri = `${format.locusUrl}/${CONTROLS}`;\n\n  return {\n    method: HTTP_VERBS.PUT,\n    uri,\n    body,\n  };\n};\n\n/**\n * @param {Object} format with {invitee {emailAddress, email, phoneNumber}, locusUrl, alertIfActive}\n * @returns {Object} the request parameters (method, uri, body) needed to make a addMember request\n */\nMembersUtil.getAddMemberRequestParams = (format: any) => {\n  const body = MembersUtil.getAddMemberBody(format);\n  const requestParams = {\n    method: HTTP_VERBS.PUT,\n    uri: format.locusUrl,\n    body,\n  };\n\n  return requestParams;\n};\n\nMembersUtil.isInvalidInvitee = (invitee) => {\n  if (!(invitee && (invitee.email || invitee.emailAddress || invitee.phoneNumber))) {\n    return true;\n  }\n\n  if (invitee.phoneNumber) {\n    return !DIALER_REGEX.E164_FORMAT.test(invitee.phoneNumber);\n  }\n\n  return !VALID_EMAIL_ADDRESS.test(invitee.email || invitee.emailAddress);\n};\n\nMembersUtil.getRemoveMemberRequestParams = (options) => {\n  const body = {\n    reason: options.reason,\n  };\n  const uri = `${options.locusUrl}/${PARTICIPANT}/${options.memberId}/${LEAVE}`;\n\n  return {\n    method: HTTP_VERBS.PUT,\n    uri,\n    body,\n  };\n};\n\nMembersUtil.generateTransferHostMemberOptions = (transfer, moderator, locusUrl) => ({\n  moderator,\n  locusUrl,\n  memberId: transfer,\n});\n\nMembersUtil.generateRemoveMemberOptions = (removal, locusUrl) => ({\n  reason: _FORCED_,\n  memberId: removal,\n  locusUrl,\n});\n\nMembersUtil.generateMuteMemberOptions = (memberId, status, locusUrl) => ({\n  memberId,\n  muted: status,\n  locusUrl,\n});\n\nMembersUtil.generateRaiseHandMemberOptions = (memberId, status, locusUrl) => ({\n  memberId,\n  raised: status,\n  locusUrl,\n});\n\nMembersUtil.generateLowerAllHandsMemberOptions = (requestingParticipantId, locusUrl) => ({\n  requestingParticipantId,\n  locusUrl,\n});\n\nMembersUtil.getMuteMemberRequestParams = (options) => {\n  const body = {\n    audio: {\n      muted: options.muted,\n    },\n  };\n  const uri = `${options.locusUrl}/${PARTICIPANT}/${options.memberId}/${CONTROLS}`;\n\n  return {\n    method: HTTP_VERBS.PATCH,\n    uri,\n    body,\n  };\n};\n\nMembersUtil.getRaiseHandMemberRequestParams = (options) => {\n  const body = {\n    hand: {\n      raised: options.raised,\n    },\n  };\n  const uri = `${options.locusUrl}/${PARTICIPANT}/${options.memberId}/${CONTROLS}`;\n\n  return {\n    method: HTTP_VERBS.PATCH,\n    uri,\n    body,\n  };\n};\n\nMembersUtil.getLowerAllHandsMemberRequestParams = (options) => {\n  const body = {\n    hand: {\n      raised: false,\n    },\n    requestingParticipantId: options.requestingParticipantId,\n  };\n  const uri = `${options.locusUrl}/${CONTROLS}`;\n\n  return {\n    method: HTTP_VERBS.PATCH,\n    uri,\n    body,\n  };\n};\n\nMembersUtil.getTransferHostToMemberRequestParams = (options) => {\n  const body = {\n    role: {\n      moderator: options.moderator,\n    },\n  };\n  const uri = `${options.locusUrl}/${PARTICIPANT}/${options.memberId}/${CONTROLS}`;\n\n  return {\n    method: HTTP_VERBS.PATCH,\n    uri,\n    body,\n  };\n};\n\nMembersUtil.genderateSendDTMFOptions = (url, tones, memberId, locusUrl) => ({\n  url,\n  tones,\n  memberId,\n  locusUrl,\n});\n\nMembersUtil.generateSendDTMFRequestParams = ({url, tones, memberId, locusUrl}) => {\n  const body = {\n    device: {\n      url,\n    },\n    memberId,\n    dtmf: {\n      correlationId: uuid.v4(),\n      tones,\n      direction: 'transmit',\n    },\n  };\n  const uri = `${locusUrl}/${PARTICIPANT}/${memberId}/${SEND_DTMF_ENDPOINT}`;\n\n  return {\n    method: HTTP_VERBS.POST,\n    uri,\n    body,\n  };\n};\n\nMembersUtil.cancelPhoneInviteOptions = (invitee, locusUrl) => ({\n  invitee,\n  locusUrl,\n});\n\nMembersUtil.generateCancelInviteRequestParams = (options) => {\n  const body = {\n    actionType: _REMOVE_,\n    invitees: [\n      {\n        address: options.invitee.phoneNumber,\n      },\n    ],\n  };\n  const requestParams = {\n    method: HTTP_VERBS.PUT,\n    uri: options.locusUrl,\n    body,\n  };\n\n  return requestParams;\n};\n\nexport default MembersUtil;\n"],"mappings":"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"}