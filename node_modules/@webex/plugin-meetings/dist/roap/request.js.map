{"version":3,"names":["_webexCore","require","_loggerProxy","_interopRequireDefault","_constants","_metrics","_config","_parameter","ownKeys","object","enumerableOnly","keys","_Object$keys2","_Object$getOwnPropertySymbols","symbols","filter","sym","_Object$getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","Object","forEach","key","_defineProperty2","default","_Object$getOwnPropertyDescriptors","_Object$defineProperties","_Object$defineProperty","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf2","result","NewTarget","constructor","_Reflect$construct","_possibleConstructorReturn2","Reflect","sham","Proxy","Boolean","prototype","valueOf","call","e","RoapRequest","_StatelessWebexPlugin","_inherits2","_super","_classCallCheck2","_createClass2","value","attachRechabilityData","localSdp","reachabilityData","window","localStorage","getItem","REACHABILITY","reachabilityResult","JSON","parse","_keys","reachability","LoggerProxy","logger","error","concat","joinMeetingWithRoap","options","_this","info","roapMessage","_promise","resolve","then","_asyncToGenerator2","_regenerator","mark","_callee","_options$preferTransc","deviceUrl","url","body","wrap","_callee$","_context","prev","next","webex","internal","device","usingResource","resourceId","correlationId","localMedias","_stringify","audioMuted","videoMuted","clientMediaPreferences","preferTranscoding","locusUrl","PARTICIPANT","sipUrl","services","waitForCatalog","get","LOCI","CALL","invitee","address","sipTarget","t0","ParameterError","abrupt","request","method","HTTP_VERBS","POST","uri","res","locus","roapSeq","seq","id","split","pop","fullState","lastActive","catch","err","stop","sendRoap","_options$preferTransc2","locusSelfUrl","mediaId","meetingId","mediaUrl","MEDIA","messageType","Metrics","postEvent","event","eventType","MEDIA_REQUEST","PUT","deviceType","config","meetings","MEDIA_RESPONSE","mediaConnections","statusCode","data","parseLocusError","StatelessWebexPlugin","exports"],"sources":["request.ts"],"sourcesContent":["/* global window */\n// @ts-ignore\nimport {StatelessWebexPlugin} from '@webex/webex-core';\n\nimport LoggerProxy from '../common/logs/logger-proxy';\nimport {PARTICIPANT, LOCI, CALL, MEDIA, HTTP_VERBS, REACHABILITY} from '../constants';\nimport Metrics from '../metrics';\nimport {eventType} from '../metrics/config';\nimport ParameterError from '../common/errors/parameter';\n/**\n * @class RoapRequest\n */\nexport default class RoapRequest extends StatelessWebexPlugin {\n  /**\n   * Joins a meeting via ROAP\n   * @param {Object} options\n   * @returns {Promise} returns a promise that resolves/rejects whatever the request does\n   */\n\n  attachRechabilityData(localSdp) {\n    const reachabilityData = window.localStorage.getItem(REACHABILITY.localStorage);\n\n    if (reachabilityData) {\n      try {\n        const reachabilityResult = JSON.parse(reachabilityData);\n\n        /* istanbul ignore else */\n        if (reachabilityResult && Object.keys(reachabilityResult).length) {\n          localSdp.reachability = reachabilityResult;\n        }\n      } catch (e) {\n        LoggerProxy.logger.error(\n          `Roap:request#attachReachabilityData --> Error in parsing reachability data: ${e}`\n        );\n      }\n    }\n\n    return localSdp;\n  }\n\n  joinMeetingWithRoap(options) {\n    LoggerProxy.logger.info('Roap:request#joinMeetingWithRoap --> Join locus with roap');\n    LoggerProxy.logger.info(\n      `Roap:request#joinMeetingWithRoap --> Local SDP: ${options.roapMessage}`\n    );\n\n    return Promise.resolve().then(async () => {\n      // @ts-ignore\n      const deviceUrl = this.webex.internal.device.url;\n      let url = '';\n\n      const body: any = {\n        deviceUrl,\n        usingResource: options.resourceId || null,\n        correlationId: options.correlationId,\n        localMedias: [\n          {\n            localSdp: JSON.stringify(\n              this.attachRechabilityData({\n                roapMessage: options.roapMessage,\n                audioMuted: false,\n                videoMuted: false,\n              })\n            ),\n          },\n        ],\n        clientMediaPreferences: {\n          preferTranscoding: options.preferTranscoding ?? true,\n        },\n      };\n\n      if (options.locusUrl) {\n        url = `${options.locusUrl}/${PARTICIPANT}`;\n      } else if (options.sipUrl) {\n        try {\n          // @ts-ignore\n          await this.webex.internal.services.waitForCatalog('postauth');\n          // @ts-ignore\n          url = `${this.webex.internal.services.get('locus')}/${LOCI}/${CALL}`;\n          body.invitee = {\n            address: options.sipTarget,\n          };\n        } catch (e) {\n          LoggerProxy.logger.error(`Roap:request#joinMeetingWithRoap --> ${e}`);\n          throw e;\n        }\n      } else {\n        throw new ParameterError('Must provide a locusUrl or sipTarget');\n      }\n\n      // @ts-ignore\n      return this.webex\n        .request({\n          method: HTTP_VERBS.POST,\n          uri: url,\n          body,\n        })\n        .then((res) => {\n          const {locus} = res.body;\n\n          locus.roapSeq = options.roapMessage.seq;\n          locus.id = locus.url.split('/').pop();\n          LoggerProxy.logger.info(\n            `Roap:request#joinMeetingWithRoap --> Joined locus [${locus.id}][${locus.fullState.lastActive}]`\n          );\n\n          return locus;\n        })\n        .catch((err) => {\n          LoggerProxy.logger.error(\n            `Roap:request#joinMeetingWithRoap --> failed with error: ${err}`\n          );\n          throw err;\n        });\n    });\n  }\n\n  /**\n   * Sends a ROAP message\n   * @param {Object} options\n   * @param {Object} options.roapMessage\n   * @param {String} options.locusSelfUrl\n   * @param {String} options.mediaId\n   * @param {String} options.correlationId\n   * @param {Boolean} options.audioMuted\n   * @param {Boolean} options.videoMuted\n   * @param {String} options.meetingId\n   * @returns {Promise} returns the response/failure of the request\n   */\n  sendRoap(options: {\n    roapMessage: any;\n    locusSelfUrl: string;\n    mediaId: string;\n    correlationId: string;\n    audioMuted: boolean;\n    videoMuted: boolean;\n    meetingId: string;\n    preferTranscoding?: boolean;\n  }) {\n    const {roapMessage, locusSelfUrl, mediaId, correlationId, meetingId} = options;\n\n    if (!mediaId) {\n      LoggerProxy.logger.info('Roap:request#sendRoap --> Race Condition /call mediaID not present');\n    }\n\n    const mediaUrl = `${locusSelfUrl}/${MEDIA}`;\n    // @ts-ignore\n    const deviceUrl = this.webex.internal.device.url;\n\n    LoggerProxy.logger.info(\n      `Roap:request#sendRoap --> ${mediaUrl} \\n ${roapMessage.messageType} \\n seq:${roapMessage.seq}`\n    );\n\n    Metrics.postEvent({event: eventType.MEDIA_REQUEST, meetingId});\n\n    // @ts-ignore\n    return this.webex\n      .request({\n        uri: mediaUrl,\n        method: HTTP_VERBS.PUT,\n        body: {\n          device: {\n            url: deviceUrl,\n            // @ts-ignore\n            deviceType: this.config.meetings.deviceType,\n          },\n          correlationId,\n          localMedias: [\n            {\n              localSdp: JSON.stringify(\n                this.attachRechabilityData({\n                  roapMessage,\n                  // eslint-disable-next-line no-warning-comments\n                  // TODO: check whats the need for video and audiomute\n                  audioMuted: !!options.audioMuted,\n                  videoMuted: !!options.videoMuted,\n                })\n              ),\n              mediaId: options.mediaId,\n            },\n          ],\n          clientMediaPreferences: {\n            preferTranscoding: options.preferTranscoding ?? true,\n          },\n        },\n      })\n      .then((res) => {\n        Metrics.postEvent({event: eventType.MEDIA_RESPONSE, meetingId});\n\n        // always it will be the first mediaConnection Object\n        const mediaConnections =\n          res.body.mediaConnections &&\n          res.body.mediaConnections.length > 0 &&\n          res.body.mediaConnections[0];\n\n        LoggerProxy.logger.info(\n          `Roap:request#sendRoap --> response:${JSON.stringify(\n            mediaConnections,\n            null,\n            2\n          )}'\\n StatusCode:'${res.statusCode}`\n        );\n        const {locus} = res.body;\n\n        locus.roapSeq = options.roapMessage.seq;\n\n        return {\n          locus,\n          ...(mediaConnections && {mediaConnections: res.body.mediaConnections}),\n        };\n      })\n      .catch((err) => {\n        Metrics.postEvent({\n          event: eventType.MEDIA_RESPONSE,\n          meetingId,\n          data: {error: Metrics.parseLocusError(err, true)},\n        });\n        LoggerProxy.logger.error(`Roap:request#sendRoap --> Error:${JSON.stringify(err, null, 2)}`);\n        LoggerProxy.logger.error(\n          `Roap:request#sendRoapRequest --> errorBody:${JSON.stringify(\n            roapMessage,\n            null,\n            2\n          )} + '\\\\n mediaId:'${options.mediaId}`\n        );\n        throw err;\n      });\n  }\n}\n"],"mappings":"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"}