{"version":3,"names":["_htmlBase","require","removeNode","node","remove","parentElement","removeChild","i","length","Error","_filter","_len","arguments","args","Array","_key","_promise","default","resolve","_filterSync","apply","filter","_curry2","exports","processCallback","allowedTags","allowedStyles","html","doc","DOMParser","parseFromString","depthFirstForEach","body","childNodes","filterNode","indexOf","concat","innerHTML","isElement","nodeName","toLowerCase","allowedTagNames","_keys","_includes2","allowedAttributes","_forEach2","listAttributeNames","attributes","attrName","removeAttribute","attrValue","getNamedItem","value","trim","reparent","styles","split","map","style","styleName","Boolean","join","setAttribute","_filterEscape","_len2","_key2","_filterEscapeSync","escapeNode","before","document","createTextNode","after","parentNode","insertBefore","trimPattern","str","replace","_reduce2","attrNames","attr","push","name","list","fn","o","ownerDocument","undefined","nodeType","filterSync","filterEscape","filterEscapeSync"],"sources":["html.shim.js"],"sourcesContent":["/*!\n * Copyright (c) 2015-2020 Cisco Systems, Inc. See LICENSE file.\n */\n\n/* eslint-env browser */\n\nimport {curry, forEach, includes, reduce} from 'lodash';\n\nexport {escape, escapeSync} from './html-base';\n\n/**\n * Some browsers don't implement {@link Element#remove()} or\n * {@link NodeList#remove()} or {@link HTMLCollection#remove()}. This wrapper\n * calls the appropriate `#remove()` method if available, or falls back to a\n * non-global-polluting polyfill.\n * @param {Element|NodeList|HTMLCollection} node\n * @returns {undefined}\n */\nfunction removeNode(node) {\n  if (node.remove) {\n    node.remove();\n\n    return;\n  }\n\n  if (node.parentElement) {\n    node.parentElement.removeChild(node);\n\n    return;\n  }\n\n  if ('length' in node) {\n    for (let i = node.length - 1; i >= 0; i -= 1) {\n      removeNode(node[i]);\n    }\n\n    return;\n  }\n\n  throw new Error('Could not find a way to remove node');\n}\n\n/**\n * @param {Object} allowedTags\n * @param {Array<string>} allowedStyles\n * @param {string} html\n * @private\n * @returns {string}\n */\nfunction _filter(...args) {\n  return new Promise((resolve) => {\n    resolve(_filterSync(...args));\n  });\n}\n\n/**\n * Curried async HTML filter.\n * @param {Object} allowedTags Map of tagName -> array of allowed attributes\n * @param {Array<string>} allowedStyles Array of allowed styles\n * @param {string} html html to filter\n * @returns {string}\n */\nexport const filter = curry(_filter, 4);\n\n/**\n * @param {function} processCallback callback function to do additional\n * processing on node. of the form process(node)\n * @param {Object} allowedTags\n * @param {Array<string>} allowedStyles\n * @param {string} html\n * @private\n * @returns {string}\n */\nfunction _filterSync(processCallback, allowedTags, allowedStyles, html) {\n  if (!html || !allowedStyles || !allowedTags) {\n    if (html.length === 0) {\n      return html;\n    }\n\n    throw new Error('`allowedTags`, `allowedStyles`, and `html` must be provided');\n  }\n\n  const doc = new DOMParser().parseFromString(html, 'text/html');\n\n  depthFirstForEach(doc.body.childNodes, filterNode);\n  processCallback(doc.body);\n\n  if (html.indexOf('body') === 1) {\n    return `<body>${doc.body.innerHTML}</body>`;\n  }\n\n  return doc.body.innerHTML;\n\n  /**\n   * @param {Node} node\n   * @private\n   * @returns {undefined}\n   */\n  function filterNode(node) {\n    if (!isElement(node)) {\n      return;\n    }\n\n    const nodeName = node.nodeName.toLowerCase();\n    const allowedTagNames = Object.keys(allowedTags);\n\n    depthFirstForEach(node.childNodes, filterNode);\n\n    if (includes(allowedTagNames, nodeName)) {\n      const allowedAttributes = allowedTags[nodeName];\n\n      forEach(listAttributeNames(node.attributes), (attrName) => {\n        if (!includes(allowedAttributes, attrName)) {\n          node.removeAttribute(attrName);\n        } else if (attrName === 'href' || attrName === 'src') {\n          const attrValue = node.attributes.getNamedItem(attrName).value.trim().toLowerCase();\n\n          // We're doing at runtime what the no-script-url rule does at compile\n          // time\n          // eslint-disable-next-line no-script-url\n          if (attrValue.indexOf('javascript:') === 0 || attrValue.indexOf('vbscript:') === 0) {\n            reparent(node);\n          }\n        } else if (attrName === 'style') {\n          const styles = node.attributes\n            .getNamedItem('style')\n            .value.split(';')\n            .map((style) => {\n              const styleName = trim(style.split(':')[0]);\n\n              if (includes(allowedStyles, styleName)) {\n                return style;\n              }\n\n              return null;\n            })\n            .filter((style) => Boolean(style))\n            .join(';');\n\n          node.setAttribute('style', styles);\n        }\n      });\n    } else {\n      reparent(node);\n    }\n  }\n}\n\n/**\n * Same as _filter, but escapes rather than removes disallowed values\n * @param {Function} processCallback\n * @param {Object} allowedTags\n * @param {Array<string>} allowedStyles\n * @param {string} html\n * @returns {Promise<string>}\n */\nfunction _filterEscape(...args) {\n  return new Promise((resolve) => {\n    resolve(_filterEscapeSync(...args));\n  });\n}\n\n/**\n * Same as _filterSync, but escapes rather than removes disallowed values\n * @param {Function} processCallback\n * @param {Object} allowedTags\n * @param {Array<string>} allowedStyles\n * @param {string} html\n * @returns {string}\n */\nfunction _filterEscapeSync(processCallback, allowedTags, allowedStyles, html) {\n  if (!html || !allowedStyles || !allowedTags) {\n    if (html.length === 0) {\n      return html;\n    }\n\n    throw new Error('`allowedTags`, `allowedStyles`, and `html` must be provided');\n  }\n\n  const doc = new DOMParser().parseFromString(html, 'text/html');\n\n  depthFirstForEach(doc.body.childNodes, filterNode);\n  processCallback(doc.body);\n\n  if (html.indexOf('body') === 1) {\n    return `<body>${doc.body.innerHTML}</body>`;\n  }\n\n  return doc.body.innerHTML;\n\n  /**\n   * @param {Node} node\n   * @private\n   * @returns {undefined}\n   */\n  function filterNode(node) {\n    if (!isElement(node)) {\n      return;\n    }\n\n    depthFirstForEach(node.childNodes, filterNode);\n\n    const nodeName = node.nodeName.toLowerCase();\n    const allowedTagNames = Object.keys(allowedTags);\n\n    if (includes(allowedTagNames, nodeName)) {\n      const allowedAttributes = allowedTags[nodeName];\n\n      forEach(listAttributeNames(node.attributes), (attrName) => {\n        if (!includes(allowedAttributes, attrName)) {\n          node.removeAttribute(attrName);\n        } else if (attrName === 'href' || attrName === 'src') {\n          const attrValue = node.attributes.getNamedItem(attrName).value.toLowerCase();\n\n          // We're doing at runtime what the no-script-url rule does at compile\n          // time\n          // eslint-disable-next-line no-script-url\n          if (attrValue.indexOf('javascript:') === 0 || attrValue.indexOf('vbscript:') === 0) {\n            reparent(node);\n          }\n        } else if (attrName === 'style') {\n          const styles = node.attributes\n            .getNamedItem('style')\n            .value.split(';')\n            .map((style) => {\n              const styleName = trim(style.split(':')[0]);\n\n              if (includes(allowedStyles, styleName)) {\n                return style;\n              }\n\n              return null;\n            })\n            .filter((style) => Boolean(style))\n            .join(';');\n\n          node.setAttribute('style', styles);\n        }\n      });\n    } else {\n      escapeNode(node);\n    }\n  }\n}\n\n/**\n * Escapes a given html node\n * @param {Node} node\n * @returns {undefined}\n */\nfunction escapeNode(node) {\n  const before = document.createTextNode(`<${node.nodeName.toLowerCase()}>`);\n  const after = document.createTextNode(`</${node.nodeName.toLowerCase()}>`);\n\n  node.parentNode.insertBefore(before, node);\n  while (node.childNodes.length > 0) {\n    node.parentNode.insertBefore(node.childNodes[0], node);\n  }\n  node.parentNode.insertBefore(after, node);\n\n  removeNode(node);\n}\n\nconst trimPattern = /^\\s|\\s$/g;\n\n/**\n * @param {string} str\n * @returns {string}\n */\nfunction trim(str) {\n  return str.replace(trimPattern, '');\n}\n\n/**\n * @param {Node} node\n * @private\n * @returns {undefined}\n */\nfunction reparent(node) {\n  while (node.childNodes.length > 0) {\n    node.parentNode.insertBefore(node.childNodes[0], node);\n  }\n  removeNode(node);\n}\n\n/**\n * @param {NamedNodeMap} attributes\n * @private\n * @returns {Array<string>}\n */\nfunction listAttributeNames(attributes) {\n  return reduce(\n    attributes,\n    (attrNames, attr) => {\n      attrNames.push(attr.name);\n\n      return attrNames;\n    },\n    []\n  );\n}\n\n/**\n * @param {Array} list\n * @param {Function} fn\n * @private\n * @returns {undefined}\n */\nfunction depthFirstForEach(list, fn) {\n  for (let i = list.length; i >= 0; i -= 1) {\n    fn(list[i]);\n  }\n}\n\n/**\n * @param {Node} o\n * @private\n * @returns {Boolean}\n */\nfunction isElement(o) {\n  if (!o) {\n    return false;\n  }\n\n  if (o.ownerDocument === undefined) {\n    return false;\n  }\n\n  if (o.nodeType !== 1) {\n    return false;\n  }\n\n  if (typeof o.nodeName !== 'string') {\n    return false;\n  }\n\n  return true;\n}\n\n/**\n * Curried HTML filter.\n * @param {Object} allowedTags Map of tagName -> array of allowed attributes\n * @param {Array<string>} allowedStyles Array of allowed styles\n * @param {string} html html to filter\n * @returns {string}\n */\nexport const filterSync = curry(_filterSync, 4);\n\n/**\n * Curried HTML filter that escapes rather than removes disallowed tags\n * @param {Object} allowedTags Map of tagName -> array of allowed attributes\n * @param {Array<string>} allowedStyles Array of allowed styles\n * @param {string} html html to filter\n * @returns {Promise<string>}\n */\nexport const filterEscape = curry(_filterEscape, 4);\n\n/**\n * Curried HTML filter that escapes rather than removes disallowed tags\n * @param {Object} allowedTags Map of tagName -> array of allowed attributes\n * @param {Array<string>} allowedStyles Array of allowed styles\n * @param {string} html html to filter\n * @returns {string}\n */\nexport const filterEscapeSync = curry(_filterEscapeSync, 4);\n"],"mappings":"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"}