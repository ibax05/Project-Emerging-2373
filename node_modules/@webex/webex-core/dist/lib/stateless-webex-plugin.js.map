{"version":3,"names":["_coreDecorators","require","_ampersandEvents","_interopRequireDefault","_class","_descriptor","webexs","_weakMap","default","StatelessWebexPlugin","attrs","arguments","length","undefined","options","_classCallCheck2","_initializerDefineProperty2","webex","parent","Error","collection","set","_createClass2","key","get","namespace","getNamespace","toLowerCase","config","logger","value","request","_this$webex","apply","upload","_this$webex2","_applyDecoratedDescriptor2","prototype","readonly","configurable","enumerable","writable","initializer","exports","_assign","AmpEvents"],"sources":["stateless-webex-plugin.js"],"sourcesContent":["import {readonly} from 'core-decorators';\nimport AmpEvents from 'ampersand-events';\n\n// hold onto weak references to parent' Webexs to help avoid retain cycles\nconst webexs = new WeakMap();\n\n/**\n * Base plugin class. Doesn't depend on Ampersand State\n */\nexport default class StatelessWebexPlugin {\n  /**\n   * The config for this plugin's namespace. If no namespace has been set\n   * returns all of webex's config.\n   * @type {Object}\n   */\n  get config() {\n    let namespace = this.getNamespace ? this.getNamespace() : this.namespace;\n\n    if (namespace) {\n      namespace = namespace.toLowerCase();\n\n      return this.webex.config[namespace];\n    }\n\n    return this.webex.config;\n  }\n\n  /**\n   * A reference to the webex logger.\n   * @type {Logger}\n   */\n  get logger() {\n    return this.webex.logger;\n  }\n\n  /**\n   * A reference to the main sdk instance\n   * @type {WebexCore}\n   */\n  get webex() {\n    return webexs.get(this);\n  }\n\n  @readonly\n  /**\n   * Mostly here for compatibility with legacy WebexPlugins.\n   * StatelessWebexPlugins will never have a state other than ready, however, if\n   * we implement stateful WebexPlugins as es6 classes, they may have the option\n   * to have ready be false\n   * @private\n   * @type {boolean}\n   */\n  ready = true;\n\n  /**\n   * Constructor. One of attrs.webex or options.parent is required\n   * @param {Object} attrs\n   * @param {WebexCore} [attrs.webex]\n   * @param {Object} options\n   * @param {WebexCore} [options.parent]\n   */\n  constructor(attrs = {}, options = {}) {\n    let webex = attrs.webex || options.parent;\n\n    if (!webex) {\n      throw new Error(\n        'One of `attrs.webex` or `options.parent` must be supplied when initializing a StatelessWebexPlugin'\n      );\n    }\n\n    while (webex.parent || webex.collection) {\n      webex = webex.parent || webex.collection;\n    }\n    webexs.set(this, webex);\n  }\n\n  /**\n   * Proxies to {@link WebexPlugin#webex}'s `request()` method.\n   * @see WebexCore#request\n   * @param {Array<mixed>} args\n   * @returns {Promise}\n   */\n  request(...args) {\n    return this.webex.request(...args);\n  }\n\n  /**\n   * Proxies to {@link WebexPlugin#webex}'s `upload()` method.\n   * @see WebexCore#upload\n   * @param {Array<mixed>} args\n   * @returns {Promise}\n   */\n  upload(...args) {\n    return this.webex.upload(...args);\n  }\n}\n\nObject.assign(StatelessWebexPlugin.prototype, AmpEvents);\n"],"mappings":"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"}