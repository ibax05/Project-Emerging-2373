{"version":3,"names":["_httpCore","require","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf2","default","result","NewTarget","constructor","_Reflect$construct","arguments","apply","_possibleConstructorReturn2","Reflect","sham","Proxy","Boolean","prototype","valueOf","call","e","WebexHttpError","_HttpError","_inherits2","_super","_classCallCheck2","_createClass2","key","value","parse","res","message","_apply","HttpError","_defineProperty","enumerable","options","url","concat","method","uri","service","toUpperCase","resource","headers","trackingid","writeable","retryAfter","exports","makeSubTypes","TooManyRequests","_HttpError$BadRequest","_super2","BadRequest"],"sources":["webex-http-error.js"],"sourcesContent":["/*!\n * Copyright (c) 2015-2020 Cisco Systems, Inc. See LICENSE file.\n */\n\nimport {HttpError} from '@webex/http-core';\n\n/**\n * Webex-specific http error class\n */\nexport default class WebexHttpError extends HttpError {\n  /**\n   * Very similar to {@link HttpError#parse()}, but additionally adds some\n   * useful headers to the message string\n   * @param {HttpResponse} res\n   * @returns {string}\n   */\n  parse(res) {\n    let message = Reflect.apply(HttpError.prototype.parse, this, [res]);\n\n    Reflect.defineProperty(this, 'options', {\n      enumerable: false,\n      value: res.options,\n    });\n\n    if (this.options.url) {\n      message += `\\n${this.options.method} ${this.options.url}`;\n    } else if (this.options.uri) {\n      message += `\\n${this.options.method} ${this.options.uri}`;\n    } else {\n      message += `\\n${this.options.method} ${this.options.service.toUpperCase()}/${\n        this.options.resource\n      }`;\n    }\n    message += `\\nWEBEX_TRACKING_ID: ${this.options.headers.trackingid}`;\n    if (this.options.headers && this.options.headers['x-trans-id']) {\n      message += `\\nX-Trans-Id: ${this.options.headers['x-trans-id']}`;\n    }\n    if (this.headers['retry-after']) {\n      Reflect.defineProperty(this, 'retryAfter', {\n        enumerable: true,\n        value: this.headers['retry-after'],\n        writeable: false,\n      });\n\n      message += `\\nRETRY-AFTER: ${this.retryAfter}`;\n    }\n    message += '\\n';\n\n    return message;\n  }\n}\n\nHttpError.makeSubTypes(WebexHttpError);\n\n/**\n * TooManyRequests\n */\nclass TooManyRequests extends HttpError.BadRequest {}\n\nHttpError[429] = TooManyRequests;\nHttpError.TooManyRequests = TooManyRequests;\n"],"mappings":"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"}