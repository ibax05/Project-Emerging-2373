{"version":3,"names":["itemsMap","_weakMap","default","linksMap","webexsMap","Page","_Symbol$iterator","res","webex","_classCallCheck2","set","body","items","parseLinkHeaders","headers","link","_createClass2","key","get","length","value","next","getLink","hasNext","hasLink","previous","hasPrevious","_this","request","uri","links","then","Boolean","_this2","i","done","linkHeaders","_isArray","reduce","linkHeader","split","replace","rel","_iterator","exports"],"sources":["page.js"],"sourcesContent":["/* eslint-disable no-constructor-return */\n\n/*!\n * Copyright (c) 2015-2020 Cisco Systems, Inc. See LICENSE file.\n */\n\nconst itemsMap = new WeakMap();\nconst linksMap = new WeakMap();\nconst webexsMap = new WeakMap();\n\n/**\n * @class Page\n */\nexport default class Page {\n  /**\n   * @type {Array}\n   */\n  get items() {\n    return itemsMap.get(this);\n  }\n\n  /**\n   * @type {number}\n   */\n  get length() {\n    return this.items.length;\n  }\n\n  /**\n   * @private\n   * @type {Object}\n   */\n  get links() {\n    return linksMap.get(this);\n  }\n\n  /**\n   * @private\n   * @type {ProxyWebex}\n   */\n  get webex() {\n    return webexsMap.get(this);\n  }\n\n  /**\n   * @constructs {Page}\n   * @param {HttpResponse} res\n   * @param {ProxyWebex} webex\n   * @returns {Page}\n   */\n  constructor(res, webex) {\n    itemsMap.set(this, res.body.items);\n    linksMap.set(this, Page.parseLinkHeaders(res.headers.link));\n    webexsMap.set(this, webex);\n\n    return this;\n  }\n\n  /**\n   * Separate a single link header string into an actionable object\n   * @param {string} linkHeaders\n   * @private\n   * @returns {Object}\n   */\n  static parseLinkHeaders(linkHeaders) {\n    if (!linkHeaders) {\n      return {};\n    }\n\n    linkHeaders = Array.isArray(linkHeaders) ? linkHeaders : [linkHeaders];\n\n    return linkHeaders.reduce((links, linkHeader) => {\n      linkHeader = linkHeader.split(';');\n      const link = linkHeader[0].replace('<', '').replace('>', '');\n      const rel = linkHeader[1].split('=')[1].replace(/\"/g, '');\n\n      links[rel] = link;\n\n      return links;\n    }, {});\n  }\n\n  /**\n   * Get next page\n   * @returns {Function}\n   */\n  next() {\n    return this.getLink('next');\n  }\n\n  /**\n   * Indicates if there's another page\n   * @returns {Boolean}\n   */\n  hasNext() {\n    return this.hasLink('next');\n  }\n\n  /**\n   * Get previous page\n   * @returns {Page}\n   */\n  previous() {\n    return this.getLink('previous');\n  }\n\n  /**\n   * Indicates if there is a previous Page\n   * @returns {Boolean}\n   */\n  hasPrevious() {\n    return this.hasLink('previous');\n  }\n\n  /**\n   * Retrieves the `Page` at url specified by `link`\n   * @param {string} link Specifies which link header to return\n   * @private\n   * @returns {Promise<Page>}\n   */\n  getLink(link) {\n    return this.webex\n      .request({\n        uri: this.links[link],\n      })\n      .then((res) => new Page(res, this.webex));\n  }\n\n  /**\n   * Indicates if the specified link is in the link header\n   * @param {string} link\n   * @private\n   * @returns {Boolean}\n   */\n  hasLink(link) {\n    return Boolean(this.links[link]);\n  }\n\n  /**\n   * Iterator\n   * @returns {Object}\n   */\n  [Symbol.iterator]() {\n    let i = -1;\n\n    return {\n      next: () => {\n        i += 1;\n        if (i < this.length) {\n          return {\n            value: this.items[i],\n          };\n        }\n\n        return {done: true};\n      },\n    };\n  }\n}\n"],"mappings":"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"}