{"version":3,"names":["proxyEvents","emitter","proxy","forEach","key","apply","arguments","transferEvents","events","source","drain","_isArray2","default","event","on","_len","length","args","Array","_key","emit","concat","target","method","trigger","Error","_len2","rest","_key2","_apply"],"sources":["events.js"],"sourcesContent":["/*!\n * Copyright (c) 2015-2020 Cisco Systems, Inc. See LICENSE file.\n */\n\nimport {isArray} from 'lodash';\n\n/**\n * Proxies the event binding methods of emitter onto proxy\n * @param {EventEmitter|EventEmitterProxy} emitter\n * @param {mixed} proxy (probably a promise)\n * @returns {EventEmitter} Returns the source emitter to ease use in promise chains\n */\nexport function proxyEvents(emitter, proxy) {\n  ['on', 'once'].forEach((key) => {\n    proxy[key] = (...args) => {\n      emitter[key](...args);\n\n      return proxy;\n    };\n  });\n\n  return emitter;\n}\n\n/**\n * Given a list of events, fires them on drain when they're emitted from source\n * @param {Array|string} events\n * @param {EventEmitter} source\n * @param {EventEmitter} drain\n * @returns {undefined}\n */\nexport function transferEvents(events, source, drain) {\n  events = isArray(events) ? events : [events];\n  events.forEach((event) => {\n    if (source.on) {\n      source.on(event, (...args) => emit(drain, event, ...args));\n    }\n  });\n}\n\n/**\n * Emits an event\n * @param {EventEmitter} target The EventEmitter from which to emit an event\n * @returns {mixed}\n */\nfunction emit(target, ...rest) {\n  const method = target.trigger || target.emit;\n\n  /* istanbul ignore if */\n  if (!method) {\n    throw new Error('count not determine emit method');\n  }\n\n  return Reflect.apply(method, target, rest);\n}\n"],"mappings":";;;;;;;;;;;AAMA;AACA;AACA;AACA;AACA;AACA;AACO,SAASA,WAAWA,CAACC,OAAO,EAAEC,KAAK,EAAE;EAC1C,CAAC,IAAI,EAAE,MAAM,CAAC,CAACC,OAAO,CAAC,UAACC,GAAG,EAAK;IAC9BF,KAAK,CAACE,GAAG,CAAC,GAAG,YAAa;MACxBH,OAAO,CAACG,GAAG,CAAC,CAAAC,KAAA,CAAZJ,OAAO,EAAAK,SAAA,CAAc;MAErB,OAAOJ,KAAK;IACd,CAAC;EACH,CAAC,CAAC;EAEF,OAAOD,OAAO;AAChB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASM,cAAcA,CAACC,MAAM,EAAEC,MAAM,EAAEC,KAAK,EAAE;EACpDF,MAAM,GAAG,IAAAG,SAAA,CAAAC,OAAA,EAAQJ,MAAM,CAAC,GAAGA,MAAM,GAAG,CAACA,MAAM,CAAC;EAC5CA,MAAM,CAACL,OAAO,CAAC,UAACU,KAAK,EAAK;IACxB,IAAIJ,MAAM,CAACK,EAAE,EAAE;MACbL,MAAM,CAACK,EAAE,CAACD,KAAK,EAAE;QAAA,SAAAE,IAAA,GAAAT,SAAA,CAAAU,MAAA,EAAIC,IAAI,OAAAC,KAAA,CAAAH,IAAA,GAAAI,IAAA,MAAAA,IAAA,GAAAJ,IAAA,EAAAI,IAAA;UAAJF,IAAI,CAAAE,IAAA,IAAAb,SAAA,CAAAa,IAAA;QAAA;QAAA,OAAKC,IAAI,CAAAf,KAAA,UAACK,KAAK,EAAEG,KAAK,EAAAQ,MAAA,CAAKJ,IAAI,EAAC;MAAA,EAAC;IAC5D;EACF,CAAC,CAAC;AACJ;;AAEA;AACA;AACA;AACA;AACA;AACA,SAASG,IAAIA,CAACE,MAAM,EAAW;EAC7B,IAAMC,MAAM,GAAGD,MAAM,CAACE,OAAO,IAAIF,MAAM,CAACF,IAAI;;EAE5C;EACA,IAAI,CAACG,MAAM,EAAE;IACX,MAAM,IAAIE,KAAK,CAAC,iCAAiC,CAAC;EACpD;EAAC,SAAAC,KAAA,GAAApB,SAAA,CAAAU,MAAA,EANsBW,IAAI,OAAAT,KAAA,CAAAQ,KAAA,OAAAA,KAAA,WAAAE,KAAA,MAAAA,KAAA,GAAAF,KAAA,EAAAE,KAAA;IAAJD,IAAI,CAAAC,KAAA,QAAAtB,SAAA,CAAAsB,KAAA;EAAA;EAQ3B,OAAO,IAAAC,MAAA,CAAAjB,OAAA,EAAcW,MAAM,EAAED,MAAM,EAAEK,IAAI,CAAC;AAC5C"}