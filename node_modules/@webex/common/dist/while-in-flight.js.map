{"version":3,"names":["_tap","_interopRequireDefault","require","whileInFlight","param","whileInFlightDecorator","target","name","descriptor","value","_wrap2","default","whileInFlightExecutor","fn","_this","_len","arguments","length","args","Array","_key","_promise","resolve","_apply","then","tap","catch","reason","reject"],"sources":["while-in-flight.js"],"sourcesContent":["/*!\n * Copyright (c) 2015-2020 Cisco Systems, Inc. See LICENSE file.\n */\n\n/* eslint no-invalid-this: [0] */\n\nimport {wrap} from 'lodash';\n\nimport tap from './tap';\n\n/**\n * While the promise returned by the decorated is unfullfilled, sets, the\n * specified boolean on the target class to `true`\n * @param {string} param\n * @returns {Function}\n */\nexport default function whileInFlight(param) {\n  return function whileInFlightDecorator(target, name, descriptor) {\n    descriptor.value = wrap(descriptor.value, function whileInFlightExecutor(fn, ...args) {\n      return new Promise((resolve) => {\n        this[param] = true;\n        resolve(\n          Reflect.apply(fn, this, args)\n            .then(\n              tap(() => {\n                this[param] = false;\n              })\n            )\n            .catch((reason) => {\n              this[param] = false;\n\n              return Promise.reject(reason);\n            })\n        );\n      });\n    });\n  };\n}\n"],"mappings":";;;;;;;;;;;AAQA,IAAAA,IAAA,GAAAC,sBAAA,CAAAC,OAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACe,SAASC,aAAaA,CAACC,KAAK,EAAE;EAC3C,OAAO,SAASC,sBAAsBA,CAACC,MAAM,EAAEC,IAAI,EAAEC,UAAU,EAAE;IAC/DA,UAAU,CAACC,KAAK,GAAG,IAAAC,MAAA,CAAAC,OAAA,EAAKH,UAAU,CAACC,KAAK,EAAE,SAASG,qBAAqBA,CAACC,EAAE,EAAW;MAAA,IAAAC,KAAA;MAAA,SAAAC,IAAA,GAAAC,SAAA,CAAAC,MAAA,EAANC,IAAI,OAAAC,KAAA,CAAAJ,IAAA,OAAAA,IAAA,WAAAK,IAAA,MAAAA,IAAA,GAAAL,IAAA,EAAAK,IAAA;QAAJF,IAAI,CAAAE,IAAA,QAAAJ,SAAA,CAAAI,IAAA;MAAA;MAClF,OAAO,IAAAC,QAAA,CAAAV,OAAA,CAAY,UAACW,OAAO,EAAK;QAC9BR,KAAI,CAACV,KAAK,CAAC,GAAG,IAAI;QAClBkB,OAAO,CACL,IAAAC,MAAA,CAAAZ,OAAA,EAAcE,EAAE,EAAEC,KAAI,EAAEI,IAAI,CAAC,CAC1BM,IAAI,CACH,IAAAC,YAAG,EAAC,YAAM;UACRX,KAAI,CAACV,KAAK,CAAC,GAAG,KAAK;QACrB,CAAC,CAAC,CACH,CACAsB,KAAK,CAAC,UAACC,MAAM,EAAK;UACjBb,KAAI,CAACV,KAAK,CAAC,GAAG,KAAK;UAEnB,OAAOiB,QAAA,CAAAV,OAAA,CAAQiB,MAAM,CAACD,MAAM,CAAC;QAC/B,CAAC,CAAC,CACL;MACH,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ,CAAC;AACH"}