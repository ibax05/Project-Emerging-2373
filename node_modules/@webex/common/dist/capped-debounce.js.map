{"version":3,"names":["debounce","fn","wait","options","Error","maxWait","maxCalls","_options","count","maxWaitTimer","waitTimer","wrapper","clearTimeout","setTimeout","exec","_apply","default"],"sources":["capped-debounce.js"],"sourcesContent":["/*!\n * Copyright (c) 2015-2020 Cisco Systems, Inc. See LICENSE file.\n */\n\n/**\n * Behaves like debounce, but additionally executes after a number of calls are\n * attempted, rather than just time\n * @param {Function} fn\n * @param {Number} wait\n * @param {Object} options\n * @returns {Function}\n */\nexport default function debounce(fn, wait, options) {\n  /* eslint no-invalid-this: [0] */\n\n  if (!fn) {\n    throw new Error('`fn` must be a function');\n  }\n\n  if (!wait) {\n    throw new Error('`wait` is required');\n  }\n\n  options = options || {};\n  if (!options.maxWait) {\n    throw new Error('`options.maxWait` is required');\n  }\n  if (!options.maxCalls) {\n    throw new Error('`options.maxCalls` is required');\n  }\n\n  const {maxCalls, maxWait} = options;\n  let count = 0;\n  let maxWaitTimer;\n  let waitTimer;\n\n  return function wrapper() {\n    count += 1;\n\n    clearTimeout(waitTimer);\n    waitTimer = setTimeout(() => exec(), wait);\n\n    if (!maxWaitTimer) {\n      maxWaitTimer = setTimeout(() => exec(), maxWait);\n    }\n\n    if (count >= maxCalls) {\n      Reflect.apply(exec, this, []);\n    }\n  };\n\n  /**\n   * @private\n   * @returns {undefined}\n   */\n  function exec() {\n    clearTimeout(waitTimer);\n    waitTimer = null;\n    clearTimeout(maxWaitTimer);\n    maxWaitTimer = null;\n    count = 0;\n\n    Reflect.apply(fn, this, []);\n  }\n}\n"],"mappings":";;;;;;;;;AAAA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACe,SAASA,QAAQA,CAACC,EAAE,EAAEC,IAAI,EAAEC,OAAO,EAAE;EAClD;;EAEA,IAAI,CAACF,EAAE,EAAE;IACP,MAAM,IAAIG,KAAK,CAAC,yBAAyB,CAAC;EAC5C;EAEA,IAAI,CAACF,IAAI,EAAE;IACT,MAAM,IAAIE,KAAK,CAAC,oBAAoB,CAAC;EACvC;EAEAD,OAAO,GAAGA,OAAO,IAAI,CAAC,CAAC;EACvB,IAAI,CAACA,OAAO,CAACE,OAAO,EAAE;IACpB,MAAM,IAAID,KAAK,CAAC,+BAA+B,CAAC;EAClD;EACA,IAAI,CAACD,OAAO,CAACG,QAAQ,EAAE;IACrB,MAAM,IAAIF,KAAK,CAAC,gCAAgC,CAAC;EACnD;EAEA,IAAAG,QAAA,GAA4BJ,OAAO;IAA5BG,QAAQ,GAAAC,QAAA,CAARD,QAAQ;IAAED,OAAO,GAAAE,QAAA,CAAPF,OAAO;EACxB,IAAIG,KAAK,GAAG,CAAC;EACb,IAAIC,YAAY;EAChB,IAAIC,SAAS;EAEb,OAAO,SAASC,OAAOA,CAAA,EAAG;IACxBH,KAAK,IAAI,CAAC;IAEVI,YAAY,CAACF,SAAS,CAAC;IACvBA,SAAS,GAAGG,UAAU,CAAC;MAAA,OAAMC,IAAI,EAAE;IAAA,GAAEZ,IAAI,CAAC;IAE1C,IAAI,CAACO,YAAY,EAAE;MACjBA,YAAY,GAAGI,UAAU,CAAC;QAAA,OAAMC,IAAI,EAAE;MAAA,GAAET,OAAO,CAAC;IAClD;IAEA,IAAIG,KAAK,IAAIF,QAAQ,EAAE;MACrB,IAAAS,MAAA,CAAAC,OAAA,EAAcF,IAAI,EAAE,IAAI,EAAE,EAAE,CAAC;IAC/B;EACF,CAAC;;EAED;AACF;AACA;AACA;EACE,SAASA,IAAIA,CAAA,EAAG;IACdF,YAAY,CAACF,SAAS,CAAC;IACvBA,SAAS,GAAG,IAAI;IAChBE,YAAY,CAACH,YAAY,CAAC;IAC1BA,YAAY,GAAG,IAAI;IACnBD,KAAK,GAAG,CAAC;IAET,IAAAO,MAAA,CAAAC,OAAA,EAAcf,EAAE,EAAE,IAAI,EAAE,EAAE,CAAC;EAC7B;AACF"}