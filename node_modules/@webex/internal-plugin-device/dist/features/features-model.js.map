{"version":3,"names":["_ampersandState","_interopRequireDefault","require","_constants","_featureCollection","FeaturesModel","AmpState","extend","collections","developer","FeatureCollection","entitlement","user","clear","options","_this","_keys","default","attributes","forEach","key","unset","_children","_collections","reset","initialize","_this2","eventNames","eventName","FEATURE_COLLECTION_NAMES","collectionName","on","model","trigger","concat","_default","exports"],"sources":["features-model.js"],"sourcesContent":["// External dependencies.\nimport AmpState from 'ampersand-state';\n\n// Local Dependencies\nimport {FEATURE_COLLECTION_NAMES} from '../constants';\n\nimport FeatureCollection from './feature-collection';\n\n/**\n * Feature collection parent container.\n *\n * @description\n * This class contains all of the feature collection class objects to help\n * organize the data retrieved from the **wdm** service on device registration.\n */\nconst FeaturesModel = AmpState.extend({\n  // Ampersand property members.\n\n  collections: {\n    /**\n     * This collection contains the developer feature collection.\n     *\n     * @type {FeatureCollection}\n     */\n    developer: FeatureCollection,\n\n    /**\n     * This collection contains the entitlement feature collection.\n     *\n     * @type {FeatureCollection}\n     */\n    entitlement: FeatureCollection,\n\n    /**\n     * This collection contains the user feature collection.\n     *\n     * @type {FeatureCollection}\n     */\n    user: FeatureCollection,\n  },\n\n  // Helper method members.\n\n  /**\n   * Recursively clear attributes, children, and collections.\n   *\n   * @param {Object} options - Attribute options to unset.\n   * @returns {this}\n   */\n  clear(options) {\n    // Clear the ampersand attributes safely if there are any. This class should\n    // never have any attributes.\n    Object.keys(this.attributes).forEach((key) => {\n      this.unset(key, options);\n    });\n\n    // Clear the ampersand children safely if there are any. This class should\n    // never have any children.\n    /* eslint-disable-next-line no-underscore-dangle */\n    Object.keys(this._children).forEach((key) => {\n      this[key].clear();\n    });\n\n    // Clear the ampersand collections safely.\n    /* eslint-disable-next-line no-underscore-dangle */\n    Object.keys(this._collections).forEach((key) => {\n      this[key].reset();\n    });\n\n    return this;\n  },\n\n  // Ampersand method members.\n\n  /**\n   * Initializer method for FeatureModel class object.\n   *\n   * @override\n   * @returns {void}\n   */\n  initialize() {\n    // Declare the collection event names.\n    const eventNames = ['change:value', 'add', 'remove'];\n\n    // Initialize collection event listeners.\n    eventNames.forEach((eventName) => {\n      FEATURE_COLLECTION_NAMES.forEach((collectionName) => {\n        this[collectionName].on(eventName, (model, options) => {\n          this.trigger(`change:${collectionName}`, this, this[collectionName], options);\n        });\n      });\n    });\n  },\n});\n\nexport default FeaturesModel;\n"],"mappings":";;;;;;;;;AACA,IAAAA,eAAA,GAAAC,sBAAA,CAAAC,OAAA;AAGA,IAAAC,UAAA,GAAAD,OAAA;AAEA,IAAAE,kBAAA,GAAAH,sBAAA,CAAAC,OAAA;AANA;;AAGA;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAMG,aAAa,GAAGC,uBAAQ,CAACC,MAAM,CAAC;EACpC;;EAEAC,WAAW,EAAE;IACX;AACJ;AACA;AACA;AACA;IACIC,SAAS,EAAEC,0BAAiB;IAE5B;AACJ;AACA;AACA;AACA;IACIC,WAAW,EAAED,0BAAiB;IAE9B;AACJ;AACA;AACA;AACA;IACIE,IAAI,EAAEF;EACR,CAAC;EAED;EAEA;AACF;AACA;AACA;AACA;AACA;EACEG,KAAK,WAAAA,MAACC,OAAO,EAAE;IAAA,IAAAC,KAAA;IACb;IACA;IACA,IAAAC,KAAA,CAAAC,OAAA,EAAY,IAAI,CAACC,UAAU,CAAC,CAACC,OAAO,CAAC,UAACC,GAAG,EAAK;MAC5CL,KAAI,CAACM,KAAK,CAACD,GAAG,EAAEN,OAAO,CAAC;IAC1B,CAAC,CAAC;;IAEF;IACA;IACA;IACA,IAAAE,KAAA,CAAAC,OAAA,EAAY,IAAI,CAACK,SAAS,CAAC,CAACH,OAAO,CAAC,UAACC,GAAG,EAAK;MAC3CL,KAAI,CAACK,GAAG,CAAC,CAACP,KAAK,EAAE;IACnB,CAAC,CAAC;;IAEF;IACA;IACA,IAAAG,KAAA,CAAAC,OAAA,EAAY,IAAI,CAACM,YAAY,CAAC,CAACJ,OAAO,CAAC,UAACC,GAAG,EAAK;MAC9CL,KAAI,CAACK,GAAG,CAAC,CAACI,KAAK,EAAE;IACnB,CAAC,CAAC;IAEF,OAAO,IAAI;EACb,CAAC;EAED;EAEA;AACF;AACA;AACA;AACA;AACA;EACEC,UAAU,WAAAA,WAAA,EAAG;IAAA,IAAAC,MAAA;IACX;IACA,IAAMC,UAAU,GAAG,CAAC,cAAc,EAAE,KAAK,EAAE,QAAQ,CAAC;;IAEpD;IACAA,UAAU,CAACR,OAAO,CAAC,UAACS,SAAS,EAAK;MAChCC,mCAAwB,CAACV,OAAO,CAAC,UAACW,cAAc,EAAK;QACnDJ,MAAI,CAACI,cAAc,CAAC,CAACC,EAAE,CAACH,SAAS,EAAE,UAACI,KAAK,EAAElB,OAAO,EAAK;UACrDY,MAAI,CAACO,OAAO,WAAAC,MAAA,CAAWJ,cAAc,GAAIJ,MAAI,EAAEA,MAAI,CAACI,cAAc,CAAC,EAAEhB,OAAO,CAAC;QAC/E,CAAC,CAAC;MACJ,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ;AACF,CAAC,CAAC;AAAC,IAAAqB,QAAA,GAEY9B,aAAa;AAAA+B,OAAA,CAAAnB,OAAA,GAAAkB,QAAA"}